(function(b){b.jgrid=b.jgrid||{};b.extend(b.jgrid,{htmlDecode:function(g){if(g=="&nbsp;"||g=="&#160;"||g.length==1&&g.charCodeAt(0)==160)return"";return!g?g:String(g).replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"')},htmlEncode:function(g){return!g?g:String(g).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/\"/g,"&quot;")},format:function(g){var j=b.makeArray(arguments).slice(1);if(g===undefined)g="";return g.replace(/\{(\d+)\}/g,function(i,
h){return j[h]})},getCellIndex:function(g){g=b(g);g=(!g.is("td")&&!g.is("th")?g.closest("td,th"):g)[0];if(b.browser.msie)return b.inArray(g,g.parentNode.cells);return g.cellIndex},stripHtml:function(g){g+="";var j=/<("[^"]*"|'[^']*'|[^'">])*>/gi;return g?g.replace(j,""):g},stringToDoc:function(g){var j;if(typeof g!=="string")return g;try{j=(new DOMParser).parseFromString(g,"text/xml")}catch(i){j=new ActiveXObject("Microsoft.XMLDOM");j.async=false;j.loadXML(g)}return j&&j.documentElement&&j.documentElement.tagName!=
"parsererror"?j:null},parse:function(g){g=g;var j;if(g.substr(0,9)=="while(1);")g=g.substr(9);if(g.substr(0,2)=="/*")g=g.substr(2,g.length-4);g||(g="{}");b.jgrid.useJSON===true&&typeof JSON==="object"&&typeof JSON.parse==="function"?(j=JSON.parse(g)):(j=eval("("+g+")"));return j.hasOwnProperty("d")?j.d:j},empty:function(){for(;this.firstChild;)this.removeChild(this.firstChild)},jqID:function(g){g+="";return g.replace(/([\.\:\[\]])/g,"\\$1")},ajaxOptions:{},extend:function(g){b.extend(b.fn.jqGrid,
g);this.no_legacy_api||b.fn.extend(g)}});b.fn.jqGrid=function(g){if(typeof g=="string"){var j=b.fn.jqGrid[g];if(!j)throw"jqGrid - No such method: "+g;var i=b.makeArray(arguments).slice(1);return j.apply(this,i)}return this.each(function(){if(!this.grid){var h=b.extend(true,{url:"",height:150,page:1,rowNum:20,records:0,pager:"",pgbuttons:true,pginput:true,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:false,selarrrow:[],savedRow:[],shrinkToFit:true,
xmlReader:{},jsonReader:{},subGrid:false,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,onHeaderClick:null,viewrecords:false,loadonce:false,multiselect:false,multikey:false,editurl:null,search:false,caption:"",hidegrid:true,hiddengrid:false,postData:{},
userData:{},treeGrid:false,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd"},forceFit:false,gridstate:"visible",cellEdit:false,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[false,""],scroll:false,multiboxonly:false,deselectAfterSort:true,scrollrows:false,autowidth:false,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:false,rownumWidth:25,rownumbers:false,
pagerpos:"center",recordpos:"right",footerrow:false,userDataOnFooter:false,hoverrows:true,altclass:"ui-priority-secondary",viewsortcols:[false,"vertical",true],resizeclass:"",autoencode:false,remapColumns:[],ajaxGridOptions:{},direction:"ltr"},b.jgrid.defaults,g||{}),f={headers:[],cols:[],footers:[],dragStart:function(c,e,d){this.resizing={idx:c,startX:e.clientX,sOL:d[0]};this.hDiv.style.cursor="col-resize";this.curGbox=b("#rs_m"+h.id,"#gbox_"+h.id);this.curGbox.css({display:"block",left:d[0],top:d[1],
height:d[2]});b.isFunction(h.resizeStart)&&h.resizeStart.call(this,e,c);document.onselectstart=new Function("return false")},dragMove:function(c){if(this.resizing){var e=c.clientX-this.resizing.startX;c=this.headers[this.resizing.idx];var d=h.direction==="ltr"?c.width+e:c.width-e,l;if(d>33){this.curGbox.css({left:this.resizing.sOL+e});if(h.forceFit===true){l=this.headers[this.resizing.idx+h.nv];e=h.direction==="ltr"?l.width-e:l.width+e;if(e>33){c.newWidth=d;l.newWidth=e}}else{this.newWidth=h.direction===
"ltr"?h.tblwidth+e:h.tblwidth-e;c.newWidth=d}}}},dragEnd:function(){this.hDiv.style.cursor="default";if(this.resizing){var c=this.resizing.idx,e=this.headers[c].newWidth||this.headers[c].width;e=parseInt(e);this.resizing=false;b("#rs_m"+h.id).css("display","none");h.colModel[c].width=e;this.headers[c].width=e;this.headers[c].el.style.width=e+"px";if(this.cols.length>0)this.cols[c].style.width=e+"px";if(this.footers.length>0)this.footers[c].style.width=e+"px";if(h.forceFit===true){e=this.headers[c+
h.nv].newWidth||this.headers[c+h.nv].width;this.headers[c+h.nv].width=e;this.headers[c+h.nv].el.style.width=e+"px";if(this.cols.length>0)this.cols[c+h.nv].style.width=e+"px";if(this.footers.length>0)this.footers[c+h.nv].style.width=e+"px";h.colModel[c+h.nv].width=e}else{h.tblwidth=this.newWidth||h.tblwidth;b("table:first",this.bDiv).css("width",h.tblwidth+"px");b("table:first",this.hDiv).css("width",h.tblwidth+"px");this.hDiv.scrollLeft=this.bDiv.scrollLeft;if(h.footerrow){b("table:first",this.sDiv).css("width",
h.tblwidth+"px");this.sDiv.scrollLeft=this.bDiv.scrollLeft}}b.isFunction(h.resizeStop)&&h.resizeStop.call(this,e,c)}this.curGbox=null;document.onselectstart=new Function("return true")},populateVisible:function(){f.timer&&clearTimeout(f.timer);f.timer=null;var c=b(f.bDiv).height();if(c){var e=b("table:first",f.bDiv),d=b("> tbody > tr:visible:first",e).outerHeight()||f.prevRowHeight;if(d){f.prevRowHeight=d;var l=h.rowNum;if(l<10){l=parseInt(c/d)+1<<1;if(l<10)l=10;h.rowNum=l}var n=f.scrollTop=f.bDiv.scrollTop,
q=Math.round(e.position().top)-n,t=q+e.height();d=d*l;var v,p,o;if(q<=0&&t<c&&(h.lastpage==null||parseInt((t+n+d-1)/d)<h.lastpage)){p=parseInt((c-t+d-1)/d);if(t>=0||p<2||h.scroll===true){v=parseInt((t+n)/d)+1;q=-1}else q=1}if(q>0){v=parseInt(n/d)+1;p=parseInt((n+c)/d)+2-v;o=true}if(p)if(!(h.lastpage&&v>h.lastpage))if(f.hDiv.loading)f.timer=setTimeout(f.populateVisible,200);else{h.page=v;if(o){f.selectionPreserver(e[0]);f.emptyRows(f.bDiv)}f.populate(p)}}}},scrollGrid:function(){if(h.scroll){var c=
f.bDiv.scrollTop;if(c!=f.scrollTop){f.scrollTop=c;f.timer&&clearTimeout(f.timer);f.timer=setTimeout(f.populateVisible,200)}}f.hDiv.scrollLeft=f.bDiv.scrollLeft;if(h.footerrow)f.sDiv.scrollLeft=f.bDiv.scrollLeft},selectionPreserver:function(c){var e=c.p,d=e.selrow,l=e.selarrrow?b.makeArray(e.selarrrow):null,n=c.grid.bDiv.scrollLeft,q=e.gridComplete;e.gridComplete=function(){e.selrow=null;e.selarrrow=[];if(e.multiselect&&l&&l.length>0)for(var t=0;t<l.length;t++)l[t]!=d&&b(c).jqGrid("setSelection",l[t],
false);d&&b(c).jqGrid("setSelection",d,false);c.grid.bDiv.scrollLeft=n;if(e.gridComplete=q)q()}}};this.p=h;var k,m,a;if(this.p.colNames.length===0)for(k=0;k<this.p.colModel.length;k++)this.p.colNames[k]=this.p.colModel[k].label||this.p.colModel[k].name;if(this.p.colNames.length!==this.p.colModel.length)alert(b.jgrid.errors.model);else{var r=b("<div class='ui-jqgrid-view'></div>"),u,x=b.browser.msie?true:false,A=b.browser.safari?true:false;a=this;a.p.direction=b.trim(a.p.direction.toLowerCase());if(b.inArray(a.p.direction,
["ltr","rtl"])==-1)a.p.direction="ltr";m=a.p.direction;b(r).insertBefore(this);b(this).appendTo(r).removeClass("scroll");var I=b("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'></div>");b(I).insertBefore(r).attr({id:"gbox_"+this.id,dir:m});b(r).appendTo(I).attr("id","gview_"+this.id);u=x&&b.browser.version<=6?'<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"></iframe>':"";b("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+
this.id+"'></div>").append(u).insertBefore(r);b("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+this.p.loadtext+"</div>").insertBefore(r);b(this).attr({cellSpacing:"0",cellPadding:"0",border:"0",role:"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var E=function(c,e){c=parseInt(c,10);return isNaN(c)?e?e:0:c},s=function(c,e){var d=a.p.colModel[c].align,l='style="',n=a.p.colModel[c].classes;if(d)l+="text-align:"+d+";";if(a.p.colModel[c].hidden===
true)l+="display:none;";if(e===0)l+="width: "+f.headers[c].width+"px;";return l+'"'+(n!==undefined?' class="'+n+'"':"")},Q=function(c,e,d,l,n){c=N(c,e,d,n,"add");return'<td role="gridcell" '+s(d,l)+' title="'+b.jgrid.stripHtml(c)+'">'+c+"</td>"},N=function(c,e,d,l,n){d=a.p.colModel[d];if(typeof d.formatter!=="undefined"){c={rowId:c,colModel:d};e=b.isFunction(d.formatter)?d.formatter(e,c,l,n):b.fmatter?b.fn.fmatter(d.formatter,e,c,l,n):ka(e)}else e=ka(e);return e},ka=function(c){return c===undefined||
c===null||c===""?"&#160;":a.p.autoencode?b.jgrid.htmlEncode(c+""):c+""},fa=function(c,e,d){c='<input type="checkbox" id="jqg_'+c+'" class="cbox" name="jqg_'+c+'"/>';return"<td role='gridcell' "+s(e,d)+">"+c+"</td>"},sa=function(c,e,d,l){d=(parseInt(d)-1)*parseInt(l)+1+e;return'<td role="gridcell" class="ui-state-default jqgrid-rownum" '+s(c,e)+">"+d+"</td>"},ta=function(c){var e,d=[],l=0,n;for(n=0;n<a.p.colModel.length;n++){e=a.p.colModel[n];if(e.name!=="cb"&&e.name!=="subgrid"&&e.name!=="rn"){d[l]=
c=="xml"?e.xmlmap||e.name:e.jsonmap||e.name;l++}}return d},ua=function(c){var e=a.p.remapColumns;if(!e||!e.length)e=b.map(a.p.colModel,function(d,l){return l});if(c)e=b.map(e,function(d){return d<c?null:d-c});return e},$=function(c,e){var d=b("tbody:first",c);if(!a.p.gridview||a.p.jqgdnd)b("*",d).children().unbind();if(x)b.jgrid.empty.apply(d[0]);else d[0].innerHTML="";if(e&&a.p.scroll){b(">div:first",c).css({height:"auto"}).children("div:first").css({height:0,display:"none"});c.scrollTop=0}},ma=
function(c,e,d,l,n){var q=new Date;a.p.reccount=0;if(b.isXMLDoc(c)){if(a.p.treeANode===-1&&!a.p.scroll){$(e);d=0}else d=d>0?d:0;var t,v=0,p,o,w=0,y=0,B=0,D,J,K=[],X,L={},Y=a.rows.length,F,S,C=[],O=0,aa=a.p.altRows===true?" "+a.p.altclass:"";a.p.xmlReader.repeatitems||(K=ta("xml"));D=a.p.keyIndex===false?a.p.xmlReader.id:a.p.keyIndex;if(K.length>0&&!isNaN(D)){if(a.p.remapColumns&&a.p.remapColumns.length)D=b.inArray(D,a.p.remapColumns);D=K[D]}J=(D+"").indexOf("[")===-1?K.length?function(T,R){return b(D,
T).text()||R}:function(T,R){return b(a.p.xmlReader.cell,T).eq(D).text()||R}:function(T,R){return T.getAttribute(D.replace(/[\[\]]/g,""))||R};b(a.p.xmlReader.page,c).each(function(){a.p.page=this.textContent||this.text||1});b(a.p.xmlReader.total,c).each(function(){a.p.lastpage=this.textContent||this.text||1});b(a.p.xmlReader.records,c).each(function(){a.p.records=this.textContent||this.text||0});b(a.p.xmlReader.userdata,c).each(function(){a.p.userData[this.getAttribute("name")]=this.textContent||this.text});
c=b(a.p.xmlReader.root+" "+a.p.xmlReader.row,c);var ba=c.length,M=0;if(c&&ba){var ga=parseInt(a.p.rowNum),va=a.p.scroll?(parseInt(a.p.page)-1)*ga+1:1;if(n)ga*=n+1;for(n=b.isFunction(a.p.afterInsertRow);M<ba;){F=c[M];S=J(F,va+M);t=M%2==1?aa:"";C[O++]='<tr id="'+S+'" role="row" class ="ui-widget-content jqgrow ui-row-'+a.p.direction+""+t+'">';if(a.p.rownumbers===true){C[O++]=sa(0,M,a.p.page,a.p.rowNum);B=1}if(a.p.multiselect===true){C[O++]=fa(S,B,M);w=1}if(a.p.subGrid===true){C[O++]=b(a).jqGrid("addSubGridCell",
w+B,M+d);y=1}if(a.p.xmlReader.repeatitems){X||(X=ua(w+y+B));var wa=b(a.p.xmlReader.cell,F);b.each(X,function(T){var R=wa[this];if(!R)return false;p=R.textContent||R.text;L[a.p.colModel[T+w+y+B].name]=p;C[O++]=Q(S,p,T+w+y+B,M+d,F)})}else for(t=0;t<K.length;t++){p=b(K[t],F).text();L[a.p.colModel[t+w+y+B].name]=p;C[O++]=Q(S,p,t+w+y+B,M+d,F)}C[O++]="</tr>";if(a.p.gridview===false){if(a.p.treeGrid===true){t=a.p.treeANode>=-1?a.p.treeANode:0;o=b(C.join(""))[0];try{b(a).jqGrid("setTreeNode",L,o)}catch(Fa){}Y===
0?b("tbody:first",e).append(o):b(a.rows[M+t+d]).after(o)}else b("tbody:first",e).append(C.join(""));if(a.p.subGrid===true)try{b(a).jqGrid("addSubGrid",a.rows[a.rows.length-1],w+B)}catch(Ga){}n&&a.p.afterInsertRow.call(a,S,L,F);C=[];O=0}L={};v++;M++;if(v==ga)break}}a.p.gridview===true&&b("tbody:first",e).append(C.join(""));a.p.totaltime=new Date-q;if(v>0){a.grid.cols=a.rows[0].cells;if(a.p.records===0)a.p.records=ba}C=null;if(!a.p.treeGrid&&!a.p.scroll)a.grid.bDiv.scrollTop=0;a.p.reccount=v;a.p.treeANode=
-1;a.p.userDataOnFooter&&b(a).jqGrid("footerData","set",a.p.userData,true);l||la(false,true)}},na=function(c,e,d,l,n){var q=new Date;a.p.reccount=0;if(c){if(a.p.treeANode===-1&&!a.p.scroll){$(e);d=0}else d=d>0?d:0;var t=0,v,p,o,w=[],y,B=0,D=0,J=0,K,X,L,Y={},F,S=a.rows.length,C;o=[];F=0;var O=a.p.altRows===true?" "+a.p.altclass:"";a.p.page=c[a.p.jsonReader.page]||1;a.p.lastpage=c[a.p.jsonReader.total]||1;a.p.records=c[a.p.jsonReader.records]||0;a.p.userData=c[a.p.jsonReader.userdata]||{};a.p.jsonReader.repeatitems||
(y=w=ta("json"));L=a.p.keyIndex===false?a.p.jsonReader.id:a.p.keyIndex;if(w.length>0&&!isNaN(L)){if(a.p.remapColumns&&a.p.remapColumns.length)L=b.inArray(L,a.p.remapColumns);L=w[L]}if(X=c[a.p.jsonReader.root]){K=X.length;c=0;var aa=parseInt(a.p.rowNum),ba=a.p.scroll?(parseInt(a.p.page)-1)*aa+1:1;if(n)aa*=n+1;for(var M=b.isFunction(a.p.afterInsertRow);c<K;){n=X[c];C=n[L];if(C===undefined){C=ba+c;if(w.length===0)if(a.p.jsonReader.cell)C=n[a.p.jsonReader.cell][L]||C}v=c%2==1?O:"";o[F++]='<tr id="'+C+
'" role="row" class= "ui-widget-content jqgrow ui-row-'+a.p.direction+""+v+'">';if(a.p.rownumbers===true){o[F++]=sa(0,c,a.p.page,a.p.rowNum);J=1}if(a.p.multiselect){o[F++]=fa(C,J,c);B=1}if(a.p.subGrid){o[F++]=b(a).jqGrid("addSubGridCell",B+J,c+d);D=1}if(a.p.jsonReader.repeatitems){if(a.p.jsonReader.cell)n=n[a.p.jsonReader.cell];y||(y=ua(B+D+J))}for(p=0;p<y.length;p++){v=n[y[p]];if(v===undefined)try{v=eval("cur."+y[p])}catch(ga){}o[F++]=Q(C,v,p+B+D+J,c+d,n);Y[a.p.colModel[p+B+D+J].name]=v}o[F++]="</tr>";
if(a.p.gridview===false){if(a.p.treeGrid===true){F=a.p.treeANode>=-1?a.p.treeANode:0;o=b(o.join(""))[0];try{b(a).jqGrid("setTreeNode",Y,o)}catch(va){}S===0?b("tbody:first",e).append(o):b(a.rows[c+F+d]).after(o)}else b("tbody:first",e).append(o.join(""));if(a.p.subGrid===true)try{b(a).jqGrid("addSubGrid",a.rows[a.rows.length-1],B+J)}catch(wa){}M&&a.p.afterInsertRow(C,Y,n);o=[];F=0}Y={};t++;c++;if(t==aa)break}a.p.gridview===true&&b("tbody:first",e).append(o.join(""));a.p.totaltime=new Date-q;if(t>0){a.grid.cols=
a.rows[0].cells;if(a.p.records===0)a.p.records=K}}if(!a.p.treeGrid&&!a.p.scroll)a.grid.bDiv.scrollTop=0;a.p.reccount=t;a.p.treeANode=-1;a.p.userDataOnFooter&&b(a).jqGrid("footerData","set",a.p.userData,true);l||la(false,true)}},la=function(c,e){var d,l,n,q,t,v,p;n=(parseInt(a.p.page)-1)*parseInt(a.p.rowNum);t=n+a.p.reccount;if(a.p.scroll){d=b("tbody:first > tr",a.grid.bDiv);n=t-d.length;if(l=d.outerHeight()){d=n*l;l=parseInt(a.p.records,10)*l;b(">div:first",a.grid.bDiv).css({height:l}).children("div:first").css({height:d,
display:d?"":"none"})}}if(a.p.pager){p=b.jgrid.formatter.integer||{};if(a.p.loadonce){d=l=1;a.p.lastpage=a.page=1;b(".selbox",a.p.pager).attr("disabled",true)}else{d=E(a.p.page);l=E(a.p.lastpage);b(".selbox",a.p.pager).attr("disabled",false)}if(a.p.pginput===true){b(".ui-pg-input",a.p.pager).val(a.p.page);b("#sp_1",a.p.pager).html(b.fmatter?b.fmatter.util.NumberFormat(a.p.lastpage,p):a.p.lastpage).width()}if(a.p.viewrecords)if(a.p.reccount===0)b(".ui-paging-info",a.p.pager).html(a.p.emptyrecords);
else{q=n+1;v=a.p.records;if(b.fmatter){q=b.fmatter.util.NumberFormat(q,p);t=b.fmatter.util.NumberFormat(t,p);v=b.fmatter.util.NumberFormat(v,p)}b(".ui-paging-info",a.p.pager).html(b.jgrid.format(a.p.recordtext,q,t,v))}if(a.p.pgbuttons===true){if(d<=0)d=l=1;d==1?b("#first, #prev",a.p.pager).addClass("ui-state-disabled").removeClass("ui-state-hover"):b("#first, #prev",a.p.pager).removeClass("ui-state-disabled");d==l?b("#next, #last",a.p.pager).addClass("ui-state-disabled").removeClass("ui-state-hover"):
b("#next, #last",a.p.pager).removeClass("ui-state-disabled")}}c===true&&a.p.rownumbers===true&&b("td.jqgrid-rownum",a.rows).each(function(o){b(this).html(n+1+o)});e&&a.p.jqgdnd&&b(a).jqGrid("gridDnD","updateDnD");b.isFunction(a.p.gridComplete)&&a.p.gridComplete()},U=function(c){if(!a.grid.hDiv.loading){var e=a.p.scroll&&c==false,d={},l,n=a.p.prmNames;if(n.search!==null)d[n.search]=a.p.search;if(n.nd!=null)d[n.nd]=(new Date).getTime();if(n.rows!==null)d[n.rows]=a.p.rowNum;if(n.page!==null)d[n.page]=
a.p.page;if(n.sort!==null)d[n.sort]=a.p.sortname;if(n.order!==null)d[n.order]=a.p.sortorder;var q=a.p.loadComplete,t=b.isFunction(q);t||(q=null);var v=0;c=c||1;if(c>1)if(n.npage!=null){d[n.npage]=c;v=c-1;c=1}else q=function(o){t&&a.p.loadComplete.call(a,o);a.grid.hDiv.loading=false;a.p.page++;U(c-1)};else n.npage!=null&&delete a.p.postData[n.npage];b.extend(a.p.postData,d);var p=!a.p.scroll?0:a.rows.length-1;if(b.isFunction(a.p.datatype))a.p.datatype(a.p.postData,"load_"+a.p.id);else{b.isFunction(a.p.beforeRequest)&&
a.p.beforeRequest.call(a);l=a.p.datatype.toLowerCase();switch(l){case "json":case "jsonp":case "xml":case "script":b.ajax(b.extend({url:a.p.url,type:a.p.mtype,dataType:l,data:b.isFunction(a.p.serializeGridData)?a.p.serializeGridData(a.p.postData):a.p.postData,complete:function(o,w){if(w=="success"||o.statusText=="OK"&&o.status=="200"){l==="xml"?ma(o.responseXML,a.grid.bDiv,p,c>1,v):na(b.jgrid.parse(o.responseText),a.grid.bDiv,p,c>1,v);q&&q.call(a,o);e&&a.grid.populateVisible()}ca()},error:function(o,
w,y){b.isFunction(a.p.loadError)&&a.p.loadError.call(a,o,w,y);ca()},beforeSend:function(o){ha();b.isFunction(a.p.loadBeforeSend)&&a.p.loadBeforeSend.call(this,o)}},b.jgrid.ajaxOptions,a.p.ajaxGridOptions));if(a.p.loadonce||a.p.treeGrid)a.p.datatype="local";break;case "xmlstring":ha();ma(d=b.jgrid.stringToDoc(a.p.datastr),a.grid.bDiv);a.p.datatype="local";t&&a.p.loadComplete.call(a,d);a.p.datastr=null;ca();break;case "jsonstring":ha();d=typeof a.p.datastr=="string"?b.jgrid.parse(a.p.datastr):a.p.datastr;
na(d,a.grid.bDiv);a.p.datatype="local";t&&a.p.loadComplete.call(a,d);a.p.datastr=null;ca();break;case "local":case "clientside":ha();a.p.datatype="local";Aa();ca();break}}}},ha=function(){a.grid.hDiv.loading=true;if(!a.p.hiddengrid)switch(a.p.loadui){case "disable":break;case "enable":b("#load_"+a.p.id).show();break;case "block":b("#lui_"+a.p.id).show();b("#load_"+a.p.id).show();break}},ca=function(){a.grid.hDiv.loading=false;switch(a.p.loadui){case "disable":break;case "enable":b("#load_"+a.p.id).hide();
break;case "block":b("#lui_"+a.p.id).hide();b("#load_"+a.p.id).hide();break}},Aa=function(){var c=/[\$,%]/g,e=[],d=0,l,n,q,t=a.p.sortorder=="asc"?1:-1;b.each(a.p.colModel,function(p){if(this.index==a.p.sortname||this.name==a.p.sortname){d=a.p.lastsort=p;l=this.sorttype;return false}});q=l=="float"||l=="number"||l=="currency"?function(p){p=parseFloat(p.replace(c,""));return isNaN(p)?0:p}:l=="int"||l=="integer"?function(p){return E(p.replace(c,""))}:l=="date"?function(p){return Ba(a.p.colModel[d].datefmt||
"Y-m-d",p).getTime()}:function(p){return b.trim(p.toUpperCase())};b.each(a.rows,function(p,o){try{n=b.unformat(b(o).children("td").eq(d),{colModel:a.p.colModel[d]},d,true)}catch(w){n=b(o).children("td").eq(d).text()}o.sortKey=q(n);e[p]=this});if(a.p.treeGrid)b(a).jqGrid("SortTree",t);else{e.sort(function(p,o){if(p.sortKey<o.sortKey)return-t;if(p.sortKey>o.sortKey)return t;return 0});if(e[0]){b("td",e[0]).each(function(p){b(this).css("width",f.headers[p].width+"px")});a.grid.cols=e[0].cells}var v=
"";if(a.p.altRows)v=a.p.altclass;b.each(e,function(p,o){if(v)p%2==1?b(o).addClass(v):b(o).removeClass(v);b("tbody",a.grid.bDiv).append(o);o.sortKey=null})}a.grid.bDiv.scrollTop=0},Ba=function(c,e){var d={m:1,d:1,y:1970,h:0,i:0,s:0},l,n,q;e=e.split(/[\\\/:_;.\t\T\s-]/);c=c.split(/[\\\/:_;.\t\T\s-]/);var t=b.jgrid.formatter.date.monthNames;l=0;for(n=c.length;l<n;l++){if(c[l]=="M"){q=b.inArray(e[l],t);if(q!==-1&&q<12)e[l]=q+1}if(c[l]=="F"){q=b.inArray(e[l],t);if(q!==-1&&q>11)e[l]=q+1-12}d[c[l].toLowerCase()]=
parseInt(e[l],10)}d.m=parseInt(d.m,10)-1;c=d.y;if(c>=70&&c<=99)d.y=1900+d.y;else if(c>=0&&c<=69)d.y=2E3+d.y;return new Date(d.y,d.m,d.d,d.h,d.i,d.s,0)};u=function(){var c=b(a.p.pager).attr("id")||"pager",e="",d="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",l="",n,q,t,v,p=function(o){b.isFunction(a.p.onPaging)&&a.p.onPaging(o);a.p.selrow=null;if(a.p.multiselect){a.p.selarrrow=[];b("#cb_"+b.jgrid.jqID(a.p.id),a.grid.hDiv).attr("checked",
false)}a.p.savedRow=[]};n="pg_"+c;q=c+"_left";t=c+"_center";v=c+"_right";b(a.p.pager).addClass("ui-jqgrid-pager ui-corner-bottom").append("<div id='"+n+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;' role='row'><tbody><tr><td id='"+q+"' align='left'></td><td id='"+t+"' align='center' style='white-space:pre;'></td><td id='"+v+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr");if(a.p.rowList.length>
0){l="<td dir='"+m+"'>";l+="<select class='ui-pg-selbox' role='listbox'>";for(q=0;q<a.p.rowList.length;q++)l+="<option role='option' value='"+a.p.rowList[q]+"'"+(a.p.rowNum==a.p.rowList[q]?" selected":"")+">"+a.p.rowList[q]+"</option>";l+="</select></td>"}if(m=="rtl")d+=l;if(a.p.pginput===true)e="<td dir='"+m+"'>"+b.jgrid.format(a.p.pgtext||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1'></span>")+"</td>";if(a.p.pgbuttons===true){q=["first",
"prev","next","last"];m=="rtl"&&q.reverse();d+="<td id='"+q[0]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-first'></span></td>";d+="<td id='"+q[1]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-prev'></span></td>";d+=e!=""?"<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>"+e+"<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>":"";d+="<td id='"+
q[2]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-next'></span></td>";d+="<td id='"+q[3]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-end'></span></td>"}else if(e!="")d+=e;if(m=="ltr")d+=l;d+="</tr></tbody></table>";a.p.viewrecords===true&&b("td#"+c+"_"+a.p.recordpos,"#"+n).append("<div dir='"+m+"' style='text-align:"+a.p.recordpos+"' class='ui-paging-info'></div>");b("td#"+c+"_"+a.p.pagerpos,"#"+n).append(d);l=b(".ui-jqgrid").css("font-size")||
"11px";b("body").append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+l+";visibility:hidden;' ></div>");d=b(d).clone().appendTo("#testpg").width();b("#testpg").remove();if(d>0){if(e!="")d+=50;b("td#"+c+"_"+a.p.pagerpos,"#"+n).width(d)}a.p._nvtd=[];a.p._nvtd[0]=d?Math.floor((a.p.width-d)/2):Math.floor(a.p.width/3);a.p._nvtd[1]=0;d=null;b(".ui-pg-selbox","#"+n).bind("change",function(){a.p.page=Math.round(a.p.rowNum*(a.p.page-1)/this.value-0.5)+1;a.p.rowNum=this.value;
p("records");U();return false});if(a.p.pgbuttons===true){b(".ui-pg-button","#"+n).hover(function(){if(b(this).hasClass("ui-state-disabled"))this.style.cursor="default";else{b(this).addClass("ui-state-hover");this.style.cursor="pointer"}},function(){if(!b(this).hasClass("ui-state-disabled")){b(this).removeClass("ui-state-hover");this.style.cursor="default"}});b("#first, #prev, #next, #last",a.p.pager).click(function(){var o=E(a.p.page),w=E(a.p.lastpage),y=false,B=true,D=true,J=true,K=true;if(w===0||
w===1)K=J=D=B=false;else if(w>1&&o>=1)if(o===1)D=B=false;else{if(!(o>1&&o<w))if(o===w)K=J=false}else if(w>1&&o===0){K=J=false;o=w-1}if(this.id==="first"&&B){a.p.page=1;y=true}if(this.id==="prev"&&D){a.p.page=o-1;y=true}if(this.id==="next"&&J){a.p.page=o+1;y=true}if(this.id==="last"&&K){a.p.page=w;y=true}if(y){p(this.id);U()}return false})}a.p.pginput===true&&b("input.ui-pg-input","#"+n).keypress(function(o){if((o.charCode?o.charCode:o.keyCode?o.keyCode:0)==13){a.p.page=b(this).val()>0?b(this).val():
a.p.page;p("user");U();return false}return this})};var xa=function(c,e,d,l){if(a.p.colModel[e].sortable)if(!(a.p.savedRow.length>0)){if(!d){if(a.p.lastsort==e)if(a.p.sortorder=="asc")a.p.sortorder="desc";else{if(a.p.sortorder=="desc")a.p.sortorder="asc"}else a.p.sortorder="asc";a.p.page=1}if(l)if(a.p.lastsort==e&&a.p.sortorder==l)return;else a.p.sortorder=l;d=b("thead:first",a.grid.hDiv).get(0);b("tr th:eq("+a.p.lastsort+") span.ui-grid-ico-sort",d).addClass("ui-state-disabled");b("tr th:eq("+a.p.lastsort+
")",d).attr("aria-selected","false");b("tr th:eq("+e+") span.ui-icon-"+a.p.sortorder,d).removeClass("ui-state-disabled");b("tr th:eq("+e+")",d).attr("aria-selected","true");if(!a.p.viewsortcols[0])if(a.p.lastsort!=e){b("tr th:eq("+a.p.lastsort+") span.s-ico",d).hide();b("tr th:eq("+e+") span.s-ico",d).show()}a.p.lastsort=e;c=c.substring(5);a.p.sortname=a.p.colModel[e].index||c;d=a.p.sortorder;b.isFunction(a.p.onSortCol)&&a.p.onSortCol.call(a,c,e,d);if(a.p.datatype=="local")a.p.deselectAfterSort&&
b(a).jqGrid("resetSelection");else{a.p.selrow=null;a.p.multiselect&&b("#cb_"+b.jgrid.jqID(a.p.id),a.grid.hDiv).attr("checked",false);a.p.selarrrow=[];a.p.savedRow=[];a.p.scroll&&$(a.grid.bDiv,true)}a.p.subGrid&&a.p.datatype=="local"&&b("td.sgexpanded","#"+a.p.id).each(function(){b(this).trigger("click")});U();if(a.p.sortname!=c&&e)a.p.lastsort=e}},Ca=function(c){var e=c,d;for(d=c+1;d<a.p.colModel.length;d++)if(a.p.colModel[d].hidden!==true){e=d;break}return e-c},Da=function(c){var e,d={},l=A?0:a.p.cellLayout;
for(e=d[0]=d[1]=d[2]=0;e<=c;e++)if(a.p.colModel[e].hidden===false)d[0]+=a.p.colModel[e].width+l;if(a.p.direction=="rtl")d[0]=a.p.width-d[0];d[0]-=a.grid.bDiv.scrollLeft;if(b(a.grid.cDiv).is(":visible"))d[1]+=b(a.grid.cDiv).height()+parseInt(b(a.grid.cDiv).css("padding-top"))+parseInt(b(a.grid.cDiv).css("padding-bottom"));if(a.p.toolbar[0]==true&&(a.p.toolbar[1]=="top"||a.p.toolbar[1]=="both"))d[1]+=b(a.grid.uDiv).height()+parseInt(b(a.grid.uDiv).css("border-top-width"))+parseInt(b(a.grid.uDiv).css("border-bottom-width"));
d[2]+=b(a.grid.bDiv).height()+b(a.grid.hDiv).height();return d};this.p.id=this.id;if(b.inArray(a.p.multikey,["shiftKey","altKey","ctrlKey"])==-1)a.p.multikey=false;a.p.keyIndex=false;for(k=0;k<a.p.colModel.length;k++)if(a.p.colModel[k].key===true){a.p.keyIndex=k;break}a.p.sortorder=a.p.sortorder.toLowerCase();if(this.p.treeGrid===true)try{b(this).jqGrid("setTreeGrid")}catch(Ha){}if(this.p.subGrid)try{b(a).jqGrid("setSubGrid")}catch(Ia){}if(this.p.multiselect){this.p.colNames.unshift("<input id='cb_"+
this.p.id+"' class='cbox' type='checkbox'/>");this.p.colModel.unshift({name:"cb",width:A?a.p.multiselectWidth+a.p.cellLayout:a.p.multiselectWidth,sortable:false,resizable:false,hidedlg:true,search:false,align:"center",fixed:true})}if(this.p.rownumbers){this.p.colNames.unshift("");this.p.colModel.unshift({name:"rn",width:a.p.rownumWidth,sortable:false,resizable:false,hidedlg:true,search:false,align:"center",fixed:true})}a.p.xmlReader=b.extend({root:"rows",row:"row",page:"rows>page",total:"rows>total",
records:"rows>records",repeatitems:true,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:true,cell:"cell"}},a.p.xmlReader);a.p.jsonReader=b.extend({root:"rows",page:"page",total:"total",records:"records",repeatitems:true,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:true,cell:"cell"}},a.p.jsonReader);if(a.p.scroll){a.p.pgbuttons=false;a.p.pginput=false;a.p.rowList=[]}var G="<thead><tr class='ui-jqgrid-labels' role='rowheader'>",ya,da,
oa,ea,ia,H,z,Z;da=Z="";if(a.p.shrinkToFit===true&&a.p.forceFit===true)for(k=a.p.colModel.length-1;k>=0;k--)if(!a.p.colModel[k].hidden){a.p.colModel[k].resizable=false;break}if(a.p.viewsortcols[1]=="horizontal"){Z=" ui-i-asc";da=" ui-i-desc"}ya=x?"class='ui-th-div-ie'":"";Z="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+Z+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+m+"'></span>";Z+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+
da+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+m+"'></span></span>";for(k=0;k<this.p.colNames.length;k++){G+="<th role='columnheader' class='ui-state-default ui-th-column ui-th-"+m+"'>";da=a.p.colModel[k].index||a.p.colModel[k].name;G+="<div id='jqgh_"+a.p.colModel[k].name+"' "+ya+">"+a.p.colNames[k];if(da==a.p.sortname)a.p.lastsort=k;G+=Z+"</div></th>"}G+="</tr></thead>";b(this).append(G);b("thead tr:first th",this).hover(function(){b(this).addClass("ui-state-hover")},function(){b(this).removeClass("ui-state-hover")});
if(this.p.multiselect){var za=true,pa=[],ja;if(typeof a.p.onSelectAll!=="function")za=false;b("#cb_"+b.jgrid.jqID(a.p.id),this).bind("click",function(){if(this.checked){b("[id^=jqg_]",a.rows).attr("checked",true);b(a.rows).each(function(c){if(!b(this).hasClass("subgrid")){b(this).addClass("ui-state-highlight").attr("aria-selected","true");a.p.selarrrow[c]=a.p.selrow=this.id}});ja=true;pa=[]}else{b("[id^=jqg_]",a.rows).attr("checked",false);b(a.rows).each(function(c){if(!b(this).hasClass("subgrid")){b(this).removeClass("ui-state-highlight").attr("aria-selected",
"false");pa[c]=this.id}});a.p.selarrrow=[];a.p.selrow=null;ja=false}if(za)a.p.onSelectAll(ja?a.p.selarrrow:pa,ja)})}b.each(a.p.colModel,function(){if(!this.width)this.width=150;this.width=parseInt(this.width)});if(a.p.autowidth===true){G=b(I).innerWidth();a.p.width=G>0?G:"nw"}(function(){var c=0,e=a.p.cellLayout,d=0,l,n=a.p.scrollOffset,q,t=false,v,p=0,o=0,w=0,y;if(A)e=0;b.each(a.p.colModel,function(){if(typeof this.hidden==="undefined")this.hidden=false;if(this.hidden===false){c+=E(this.width);if(this.fixed){p+=
this.width;o+=this.width+e}else d++;w++}});if(isNaN(a.p.width))a.p.width=f.width=c;else f.width=a.p.width;a.p.tblwidth=c;if(a.p.shrinkToFit===false&&a.p.forceFit===true)a.p.forceFit=false;if(a.p.shrinkToFit===true&&d>0){v=f.width-e*d-o;if(!isNaN(a.p.height)){v-=n;t=true}c=0;b.each(a.p.colModel,function(B){if(this.hidden===false&&!this.fixed){this.width=q=Math.floor(v/(a.p.tblwidth-p)*this.width);c+=q;l=B}});y=0;if(t){if(f.width-o-(c+e*d)!==n)y=f.width-o-(c+e*d)-n}else if(!t&&Math.abs(f.width-o-(c+
e*d))!==1)y=f.width-o-(c+e*d);a.p.colModel[l].width+=y;a.p.tblwidth=c+y+p+w*e}})();b(I).css("width",f.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+a.p.id+"'>&#160;</div>");b(r).css("width",f.width+"px");G=b("thead:first",a).get(0);var qa="<table role='grid' style='width:"+a.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+m+"'>";r=b("tr:first",G);a.p.disableClick=false;b("th",r).each(function(c){b("div",
this);oa=a.p.colModel[c].width;if(typeof a.p.colModel[c].resizable==="undefined")a.p.colModel[c].resizable=true;if(a.p.colModel[c].resizable){ea=document.createElement("span");b(ea).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+m);!b.browser.opera&&b(ea).css("cursor","col-resize");b(this).addClass(a.p.resizeclass)}else ea="";b(this).css("width",oa+"px").prepend(ea);a.p.colModel[c].hidden&&b(this).css("display","none");f.headers[c]={width:oa,el:this};ia=a.p.colModel[c].sortable;if(typeof ia!==
"boolean")ia=a.p.colModel[c].sortable=true;var e=a.p.colModel[c].name;e=="cb"||e=="subgrid"||e=="rn"||a.p.viewsortcols[2]&&b("div",this).addClass("ui-jqgrid-sortable");if(ia)if(a.p.viewsortcols[0]){b("div span.s-ico",this).show();c==a.p.lastsort&&b("div span.ui-icon-"+a.p.sortorder,this).removeClass("ui-state-disabled")}else if(c==a.p.lastsort){b("div span.s-ico",this).show();b("div span.ui-icon-"+a.p.sortorder,this).removeClass("ui-state-disabled")}qa+="<td role='gridcell' "+s(c,0)+">&#160;</td>"}).mousedown(function(c){if(b(c.target).closest("th>span.ui-jqgrid-resize").length==
1){var e=b.jgrid.getCellIndex(this);if(a.p.forceFit===true)a.p.nv=Ca(e);f.dragStart(e,c,Da(e));return false}}).click(function(c){if(a.p.disableClick)return a.p.disableClick=false;var e="th>div.ui-jqgrid-sortable",d,l;a.p.viewsortcols[2]||(e="th>div>span>span.ui-grid-ico-sort");c=b(c.target).closest(e);if(c.length==1){e=b.jgrid.getCellIndex(this);if(!a.p.viewsortcols[2]){d=true;l=c.attr("sort")}xa(b("div",this)[0].id,e,d,l);return false}});if(a.p.sortable&&b.fn.sortable)try{b(a).jqGrid("sortableColumns",
r)}catch(Ja){}qa+="</tr></tbody></table>";this.appendChild(document.createElement("tbody"));b(this).addClass("ui-jqgrid-btable");r=b("<table class='ui-jqgrid-htable' style='width:"+a.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'></table>").append(G);var P=a.p.caption&&a.p.hiddengrid===true?true:false;G=b("<div class='ui-jqgrid-hbox"+(m=="rtl"?"-rtl":"")+"'></div>");f.hDiv=document.createElement("div");b(f.hDiv).css({width:f.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(G);
b(G).append(r);P&&b(f.hDiv).hide();a.p._height=0;if(a.p.pager){if(typeof a.p.pager=="string")if(a.p.pager.substr(0,1)!="#")a.p.pager="#"+a.p.pager;b(a.p.pager).css({width:f.width+"px"}).appendTo(I).addClass("ui-state-default ui-jqgrid-pager");a.p._height+=parseInt(b(a.p.pager).height(),10);P&&b(a.p.pager).hide();u()}a.p.cellEdit===false&&a.p.hoverrows===true&&b(a).bind("mouseover",function(c){z=b(c.target).closest("tr.jqgrow");b(z).attr("class")!=="subgrid"&&b(z).addClass("ui-state-hover");return false}).bind("mouseout",
function(c){z=b(c.target).closest("tr.jqgrow");b(z).removeClass("ui-state-hover");return false});var V,W;b(a).before(f.hDiv).click(function(c){H=c.target;var e=b(H).hasClass("cbox");z=b(H,a.rows).closest("tr.jqgrow");if(b(z).length===0)return this;var d=true;if(b.isFunction(a.p.beforeSelectRow))d=a.p.beforeSelectRow.call(a,z[0].id,c);if(H.tagName=="A"||(H.tagName=="INPUT"||H.tagName=="TEXTAREA"||H.tagName=="OPTION"||H.tagName=="SELECT")&&!e)return true;if(d===true){if(a.p.cellEdit===true)if(a.p.multiselect&&
e)b(a).jqGrid("setSelection",z[0].id,true);else{V=z[0].rowIndex;W=b.jgrid.getCellIndex(H);try{b(a).jqGrid("editCell",V,W,true)}catch(l){}}else if(a.p.multikey)if(c[a.p.multikey])b(a).jqGrid("setSelection",z[0].id,true);else{if(a.p.multiselect&&e){e=b("[id^=jqg_]",z).attr("checked");b("[id^=jqg_]",z).attr("checked",!e)}}else{if(a.p.multiselect&&a.p.multiboxonly)if(!e){b(a.p.selarrrow).each(function(n,q){n=a.rows.namedItem(q);b(n).removeClass("ui-state-highlight");b("#jqg_"+b.jgrid.jqID(q),n).attr("checked",
false)});a.p.selarrrow=[];b("#cb_"+b.jgrid.jqID(a.p.id),a.grid.hDiv).attr("checked",false)}b(a).jqGrid("setSelection",z[0].id,true)}if(b.isFunction(a.p.onCellSelect)){V=z[0].id;W=b.jgrid.getCellIndex(H);a.p.onCellSelect.call(a,V,W,b(H).html(),c)}}c.stopPropagation()}).bind("reloadGrid",function(c,e){if(a.p.treeGrid===true)a.p.datatype=a.p.treedatatype;e&&e.current&&a.grid.selectionPreserver(a);if(a.p.datatype=="local")b(a).jqGrid("resetSelection");else if(!a.p.treeGrid){a.p.selrow=null;if(a.p.multiselect){a.p.selarrrow=
[];b("#cb_"+b.jgrid.jqID(a.p.id),a.grid.hDiv).attr("checked",false)}a.p.savedRow=[];a.p.scroll&&$(a.grid.bDiv)}if(e&&e.page){c=e.page;if(c>a.p.lastpage)c=a.p.lastpage;if(c<1)c=1;a.p.page=c;a.grid.bDiv.scrollTop=a.grid.prevRowHeight?(c-1)*a.grid.prevRowHeight*a.p.rowNum:0}if(a.grid.prevRowHeight&&a.p.scroll){delete a.p.lastpage;a.grid.populateVisible()}else a.grid.populate();return false});b.isFunction(this.p.ondblClickRow)&&b(this).dblclick(function(c){H=c.target;z=b(H,a.rows).closest("tr.jqgrow");
if(b(z).length===0)return false;V=z[0].rowIndex;W=b.jgrid.getCellIndex(H);a.p.ondblClickRow.call(a,b(z).attr("id"),V,W,c);return false});b.isFunction(this.p.onRightClickRow)&&b(this).bind("contextmenu",function(c){H=c.target;z=b(H,a.rows).closest("tr.jqgrow");if(b(z).length===0)return false;a.p.multiselect||b(a).jqGrid("setSelection",z[0].id,true);V=z[0].rowIndex;W=b.jgrid.getCellIndex(H);a.p.onRightClickRow.call(a,b(z).attr("id"),V,W,c);return false});f.bDiv=document.createElement("div");b(f.bDiv).append(b('<div style="position:relative;>'+
(x&&b.browser.version<8?"height:0.01%;":"")+'"</div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:a.p.height+(isNaN(a.p.height)?"":"px"),width:f.width+"px"}).scroll(f.scrollGrid);b("table:first",f.bDiv).css({width:a.p.tblwidth+"px"});if(x){b("tbody",this).size()==2&&b("tbody:first",this).remove();a.p.multikey&&b(f.bDiv).bind("selectstart",function(){return false})}else a.p.multikey&&b(f.bDiv).bind("mousedown",function(){return false});P&&b(f.bDiv).hide();f.cDiv=document.createElement("div");
var ra=a.p.hidegrid===true?b("<a role='link' href='javascript:void(0)'/>").addClass("ui-jqgrid-titlebar-close HeaderButton").hover(function(){ra.addClass("ui-state-hover")},function(){ra.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-circle-triangle-n'></span>").css(m=="rtl"?"left":"right","0px"):"";b(f.cDiv).append(ra).append("<span class='ui-jqgrid-title"+(m=="rtl"?"-rtl":"")+"'>"+a.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix");
b(f.cDiv).insertBefore(f.hDiv);if(a.p.toolbar[0]){f.uDiv=document.createElement("div");if(a.p.toolbar[1]=="top")b(f.uDiv).insertBefore(f.hDiv);else a.p.toolbar[1]=="bottom"&&b(f.uDiv).insertAfter(f.hDiv);if(a.p.toolbar[1]=="both"){f.ubDiv=document.createElement("div");b(f.uDiv).insertBefore(f.hDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id);b(f.ubDiv).insertAfter(f.hDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id);a.p._height+=E(b(f.ubDiv).height());P&&
b(f.ubDiv).hide()}else b(f.uDiv).width(f.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id);a.p._height+=E(b(f.uDiv).height());P&&b(f.uDiv).hide()}if(a.p.footerrow){f.sDiv=b("<div class='ui-jqgrid-sdiv'></div>")[0];G=b("<div class='ui-jqgrid-hbox"+(m=="rtl"?"-rtl":"")+"'></div>");b(f.sDiv).append(G).insertAfter(f.hDiv).width(f.width);b(G).append(qa);f.footers=b(".ui-jqgrid-ftable",f.sDiv)[0].rows[0].cells;if(a.p.rownumbers)f.footers[0].className="ui-state-default jqgrid-rownum";
P&&b(f.sDiv).hide()}if(a.p.caption){a.p._height+=parseInt(b(f.cDiv,a).height(),10);var Ea=a.p.datatype;if(a.p.hidegrid===true){b(".ui-jqgrid-titlebar-close",f.cDiv).click(function(c){var e=b.isFunction(a.p.onHeaderClick);if(a.p.gridstate=="visible"){b(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+a.p.id).slideUp("fast");a.p.pager&&b(a.p.pager).slideUp("fast");if(a.p.toolbar[0]===true){a.p.toolbar[1]=="both"&&b(f.ubDiv).slideUp("fast");b(f.uDiv).slideUp("fast")}a.p.footerrow&&b(".ui-jqgrid-sdiv","#gbox_"+
a.p.id).slideUp("fast");b("span",this).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s");a.p.gridstate="hidden";if(e)P||a.p.onHeaderClick.call(a,a.p.gridstate,c)}else if(a.p.gridstate=="hidden"){b(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+a.p.id).slideDown("fast");a.p.pager&&b(a.p.pager).slideDown("fast");if(a.p.toolbar[0]===true){a.p.toolbar[1]=="both"&&b(f.ubDiv).slideDown("fast");b(f.uDiv).slideDown("fast")}a.p.footerrow&&b(".ui-jqgrid-sdiv","#gbox_"+a.p.id).slideDown("fast");
b("span",this).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n");if(P){a.p.datatype=Ea;U();P=false}a.p.gridstate="visible";e&&a.p.onHeaderClick.call(a,a.p.gridstate,c)}return false});if(P){a.p.datatype="local";b(".ui-jqgrid-titlebar-close",f.cDiv).trigger("click")}}}else b(f.cDiv).hide();b(f.hDiv).after(f.bDiv).mousemove(function(c){if(f.resizing){f.dragMove(c);return false}});b(".ui-jqgrid-labels",f.hDiv).bind("selectstart",function(){return false});a.p._height+=parseInt(b(f.hDiv).height(),
10);b(document).mouseup(function(){if(f.resizing){f.dragEnd();return false}return true});this.updateColumns=function(){var c=this.rows[0],e=this;if(c){b("td",c).each(function(d){b(this).css("width",e.grid.headers[d].width+"px")});this.grid.cols=c.cells}return this};a.formatCol=s;a.sortData=xa;a.updatepager=la;a.formatter=function(c,e,d,l,n){return N(c,e,d,l,n)};b.extend(f,{populate:U,emptyRows:$});this.grid=f;a.addXmlData=function(c){ma(c,a.grid.bDiv)};a.addJSONData=function(c){na(c,a.grid.bDiv)};
U();a.p.hiddengrid=false;b(window).unload(function(){b(this).empty();this.p=this.grid=null})}}})};b.jgrid.extend({getGridParam:function(g){var j=this[0];if(j.grid)return g?typeof j.p[g]!="undefined"?j.p[g]:null:j.p},setGridParam:function(g){return this.each(function(){this.grid&&typeof g==="object"&&b.extend(true,this.p,g)})},getDataIDs:function(){var g=[],j=0,i;this.each(function(){if((i=this.rows.length)&&i>0)for(;j<i;){g[j]=this.rows[j].id;j++}});return g},setSelection:function(g,j){return this.each(function(){function i(a,
r){var u=b(h.grid.bDiv)[0].clientHeight,x=b(h.grid.bDiv)[0].scrollTop,A=h.rows[a].offsetTop+h.rows[a].clientHeight;a=h.rows[a].offsetTop;if(r=="d")if(A>=u)b(h.grid.bDiv)[0].scrollTop=x+A-a;if(r=="u")if(a<x)b(h.grid.bDiv)[0].scrollTop=x-A+a}var h=this,f,k,m;if(g!==undefined){j=j===false?false:true;f=h.rows.namedItem(g);if(f!=null){if(h.p.selrow&&h.p.scrollrows===true){k=h.rows.namedItem(h.p.selrow).rowIndex;m=h.rows.namedItem(g).rowIndex;if(m>=0)m>k?i(m,"d"):i(m,"u")}if(h.p.multiselect){h.p.selrow=
f.id;k=b.inArray(h.p.selrow,h.p.selarrrow);if(k===-1){b(f).attr("class")!=="subgrid"&&b(f).addClass("ui-state-highlight").attr("aria-selected","true");f=true;b("#jqg_"+b.jgrid.jqID(h.p.selrow),h.rows).attr("checked",f);h.p.selarrrow.push(h.p.selrow);h.p.onSelectRow&&j&&h.p.onSelectRow(h.p.selrow,f)}else{b(f).attr("class")!=="subgrid"&&b(f).removeClass("ui-state-highlight").attr("aria-selected","false");f=false;b("#jqg_"+b.jgrid.jqID(h.p.selrow),h.rows).attr("checked",f);h.p.selarrrow.splice(k,1);
h.p.onSelectRow&&j&&h.p.onSelectRow(h.p.selrow,f);f=h.p.selarrrow[0];h.p.selrow=f===undefined?null:f}}else if(b(f).attr("class")!=="subgrid"){h.p.selrow&&b("tr#"+b.jgrid.jqID(h.p.selrow),h.grid.bDiv).removeClass("ui-state-highlight").attr("aria-selected","false");h.p.selrow=f.id;b(f).addClass("ui-state-highlight").attr("aria-selected","true");h.p.onSelectRow&&j&&h.p.onSelectRow(h.p.selrow,true)}}}})},resetSelection:function(){return this.each(function(){var g=this,j;if(g.p.multiselect){b(g.p.selarrrow).each(function(i,
h){j=g.rows.namedItem(h);b(j).removeClass("ui-state-highlight").attr("aria-selected","false");b("#jqg_"+b.jgrid.jqID(h),j).attr("checked",false)});b("#cb_"+b.jgrid.jqID(g.p.id),g.grid.hDiv).attr("checked",false);g.p.selarrrow=[]}else if(g.p.selrow){b("tr#"+b.jgrid.jqID(g.p.selrow),g.grid.bDiv).removeClass("ui-state-highlight").attr("aria-selected","false");g.p.selrow=null}g.p.savedRow=[]})},getRowData:function(g){var j={},i,h=false,f,k=0;this.each(function(){var m=this,a,r;if(typeof g=="undefined"){h=
true;i=[];f=m.rows.length}else{r=m.rows.namedItem(g);if(!r)return j;f=1}for(;k<f;){if(h)r=m.rows[k];b("td",r).each(function(u){a=m.p.colModel[u].name;if(a!=="cb"&&a!=="subgrid")if(m.p.treeGrid===true&&a==m.p.ExpandColumn)j[a]=b.jgrid.htmlDecode(b("span:first",this).html());else try{j[a]=b.unformat(this,{colModel:m.p.colModel[u]},u)}catch(x){j[a]=b.jgrid.htmlDecode(b(this).html())}});k++;if(h){i.push(j);j={}}}});return i?i:j},delRowData:function(g){var j=false,i,h,f;this.each(function(){var k=this;
if(i=k.rows.namedItem(g)){f=i.rowIndex;b(i).remove();k.p.records--;k.p.reccount--;k.updatepager(true,false);j=true;if(g==k.p.selrow)k.p.selrow=null;h=b.inArray(g,k.p.selarrrow);h!=-1&&k.p.selarrrow.splice(h,1)}else return false;f==0&&j&&k.updateColumns();if(k.p.altRows===true&&j){var m=k.p.altclass;b(k.rows).each(function(a){a%2==1?b(this).addClass(m):b(this).removeClass(m)})}});return j},setRowData:function(g,j,i){var h,f=false;this.each(function(){var k=this,m,a,r=typeof i;if(!k.grid)return false;
a=k.rows.namedItem(g);if(!a)return false;j&&b(this.p.colModel).each(function(u){h=this.name;if(j[h]!=undefined){m=k.formatter(g,j[h],u,j,"edit");k.p.treeGrid===true&&h==k.p.ExpandColumn?b("td:eq("+u+") > span:first",a).html(m).attr("title",b.jgrid.stripHtml(m)):b("td:eq("+u+")",a).html(m).attr("title",b.jgrid.stripHtml(m));f=true}});if(r==="string")b(a).addClass(i);else r==="object"&&b(a).css(i)});return f},addRowData:function(g,j,i,h){i||(i="last");var f=false,k,m="",a=0,r=0,u=0,x,A,I,E="";j&&this.each(function(){var s=
this;if(s.p.rownumbers===true){E=s.formatCol(u,1);m+='<td role="gridcell" class="ui-state-default jqgrid-rownum" '+E+">0</td>";u=1}if(s.p.multiselect){I='<input type="checkbox" id="jqg_'+g+'" class="cbox"/>';E=s.formatCol(u,1);m+='<td role="gridcell" '+E+">"+I+"</td>";a=1}if(s.p.subGrid===true){m+=b(s).jqGrid("addSubGridCell",a+u,1);r=1}if(typeof g!="undefined")g+="";else{g=s.p.records+1+"";if(s.p.keyIndex!==false){var Q=s.p.colModel[s.p.keyIndex+a+r+u].name;if(typeof j[Q]!="undefined")g=j[Q]}}for(A=
a+r+u;A<this.p.colModel.length;A++){k=this.p.colModel[A].name;I=s.formatter(g,j[k],A,j,"add");E=s.formatCol(A,1);m+='<td role="gridcell" '+E+' title="'+b.jgrid.stripHtml(I)+'">'+I+"</td>"}m='<tr id="'+g+'" role="row" class="ui-widget-content jqgrow ui-row-'+s.p.direction+'">'+m+"</tr>";if(s.p.subGrid===true){m=b(m)[0];b(s).jqGrid("addSubGrid",m,a+u)}if(s.rows.length===0)b("table:first",s.grid.bDiv).append(m);else switch(i){case "last":b(s.rows[s.rows.length-1]).after(m);break;case "first":b(s.rows[0]).before(m);
break;case "after":if(x=s.rows.namedItem(h))b(s.rows[x.rowIndex+1]).hasClass("ui-subgrid")?b(s.rows[x.rowIndex+1]).after(m):b(x).after(m);break;case "before":if(x=s.rows.namedItem(h)){b(x).before(m);x=x.rowIndex}break}s.p.records++;s.p.reccount++;if(!s.grid.cols||!s.grid.cols.length)s.grid.cols=s.rows[0].cells;if(i==="first"||i==="before"&&x<=1||s.rows.length===1)s.updateColumns();if(s.p.altRows===true){var N=s.p.altclass;if(i=="last")(s.rows.length-1)%2==1&&b(s.rows[s.rows.length-1]).addClass(N);
else b(s.rows).each(function(fa){fa%2==1?b(this).addClass(N):b(this).removeClass(N)})}try{s.p.afterInsertRow(g,j)}catch(ka){}s.updatepager(true,true);f=true});return f},footerData:function(g,j,i){function h(a){for(var r in a)return false;return true}var f,k=false,m={};if(typeof g=="undefined")g="get";if(typeof i!="boolean")i=true;g=g.toLowerCase();this.each(function(){var a=this,r;if(!a.grid||!a.p.footerrow)return false;if(g=="set")if(h(j))return false;k=true;b(this.p.colModel).each(function(u){f=
this.name;if(g=="set"){if(j[f]!=undefined){r=i?a.formatter("",j[f],u,j,"edit"):j[f];b("tr.footrow td:eq("+u+")",a.grid.sDiv).html(r).attr("title",b.jgrid.stripHtml(r));k=true}}else if(g=="get")m[f]=b("tr.footrow td:eq("+u+")",a.grid.sDiv).html()})});return g=="get"?m:k},ShowHideCol:function(g,j){return this.each(function(){var i=this,h=false;if(i.grid){if(typeof g==="string")g=[g];j=j!="none"?"":"none";var f=j==""?true:false;b(this.p.colModel).each(function(k){if(b.inArray(this.name,g)!==-1&&this.hidden===
f){b("tr",i.grid.hDiv).each(function(){b("th:eq("+k+")",this).css("display",j)});b(i.rows).each(function(m){b("td:eq("+k+")",i.rows[m]).css("display",j)});i.p.footerrow&&b("td:eq("+k+")",i.grid.sDiv).css("display",j);if(j=="none")i.p.tblwidth-=this.width;else i.p.tblwidth+=this.width;this.hidden=!f;h=true}});if(h===true){b("table:first",i.grid.hDiv).width(i.p.tblwidth);b("table:first",i.grid.bDiv).width(i.p.tblwidth);i.grid.hDiv.scrollLeft=i.grid.bDiv.scrollLeft;if(i.p.footerrow){b("table:first",
i.grid.sDiv).width(i.p.tblwidth);i.grid.sDiv.scrollLeft=i.grid.bDiv.scrollLeft}}}})},hideCol:function(g){return this.each(function(){b(this).jqGrid("ShowHideCol",g,"none")})},showCol:function(g){return this.each(function(){b(this).jqGrid("ShowHideCol",g,"")})},remapColumns:function(g,j,i){function h(m){var a;a=m.length?b.makeArray(m):b.extend({},m);b.each(g,function(r){m[r]=a[this]})}function f(m,a){b(">tr"+(a||""),m).each(function(){var r=this,u=b.makeArray(r.cells);b.each(g,function(){var x=u[this];
x&&r.appendChild(x)})})}var k=this.get(0);h(k.p.colModel);h(k.p.colNames);h(k.grid.headers);f(b("thead:first",k.grid.hDiv),i&&":not(.ui-jqgrid-labels)");j&&f(b("tbody:first",k.grid.bDiv),".jqgrow");k.p.footerrow&&f(b("tbody:first",k.grid.sDiv));if(k.p.remapColumns)if(k.p.remapColumns.length)h(k.p.remapColumns);else k.p.remapColumns=b.makeArray(g);k.p.lastsort=b.inArray(k.p.lastsort,g);if(k.p.treeGrid)k.p.expColInd=b.inArray(k.p.expColInd,g)},setGridWidth:function(g,j){return this.each(function(){var i=
this,h,f=0,k=i.p.cellLayout,m,a=0,r=false,u=i.p.scrollOffset,x,A=0,I=0,E=0,s;if(i.grid){if(typeof j!="boolean")j=i.p.shrinkToFit;if(!isNaN(g)){g=parseInt(g);i.grid.width=i.p.width=g;b("#gbox_"+i.p.id).css("width",g+"px");b("#gview_"+i.p.id).css("width",g+"px");b(i.grid.bDiv).css("width",g+"px");b(i.grid.hDiv).css("width",g+"px");i.p.pager&&b(i.p.pager).css("width",g+"px");if(i.p.toolbar[0]===true){b(i.grid.uDiv).css("width",g+"px");i.p.toolbar[1]=="both"&&b(i.grid.ubDiv).css("width",g+"px")}i.p.footerrow&&
b(i.grid.sDiv).css("width",g+"px");if(j===false&&i.p.forceFit==true)i.p.forceFit=false;if(j===true){if(b.browser.safari)k=0;b.each(i.p.colModel,function(){if(this.hidden===false){f+=parseInt(this.width,10);if(this.fixed){I+=this.width;A+=this.width+k}else a++;E++}});if(a!=0){i.p.tblwidth=f;x=g-k*a-A;if(!isNaN(i.p.height))if(b(i.grid.bDiv)[0].clientHeight<b(i.grid.bDiv)[0].scrollHeight){r=true;x-=u}f=0;var Q=i.grid.cols.length>0;b.each(i.p.colModel,function(N){if(this.hidden===false&&!this.fixed){this.width=
h=Math.floor(x/(i.p.tblwidth-I)*this.width);f+=h;i.grid.headers[N].width=h;i.grid.headers[N].el.style.width=h+"px";if(i.p.footerrow)i.grid.footers[N].style.width=h+"px";if(Q)i.grid.cols[N].style.width=h+"px";m=N}});s=0;if(r){if(g-A-(f+k*a)!==u)s=g-A-(f+k*a)-u}else if(Math.abs(g-A-(f+k*a))!==1)s=g-A-(f+k*a);i.p.colModel[m].width+=s;h=i.p.colModel[m].width;i.grid.headers[m].width=h;i.grid.headers[m].el.style.width=h+"px";if(Q)i.grid.cols[m].style.width=h+"px";i.p.tblwidth=f+s+I+k*E;b("table:first",
i.grid.bDiv).css("width",i.p.tblwidth+"px");b("table:first",i.grid.hDiv).css("width",i.p.tblwidth+"px");i.grid.hDiv.scrollLeft=i.grid.bDiv.scrollLeft;if(i.p.footerrow){i.grid.footers[m].style.width=h+"px";b("table:first",i.grid.sDiv).css("width",i.p.tblwidth+"px")}}}}}})},setGridHeight:function(g){return this.each(function(){var j=this;if(j.grid){b(j.grid.bDiv).css({height:g+(isNaN(g)?"":"px")});j.p.height=g;j.p.scroll&&j.grid.populateVisible()}})},setCaption:function(g){return this.each(function(){this.p.caption=
g;b("span.ui-jqgrid-title",this.grid.cDiv).html(g);b(this.grid.cDiv).show()})},setLabel:function(g,j,i,h){return this.each(function(){var f=this,k=-1;if(f.grid){if(isNaN(g))b(f.p.colModel).each(function(r){if(this.name==g){k=r;return false}});else k=parseInt(g,10);if(k>=0){var m=b("tr.ui-jqgrid-labels th:eq("+k+")",f.grid.hDiv);if(j){var a=b(".s-ico",m);b("[id^=jqgh_]",m).empty().html(j).append(a);f.p.colNames[k]=j}if(i)typeof i==="string"?b(m).addClass(i):b(m).css(i);typeof h==="object"&&b(m).attr(h)}}})},
setCell:function(g,j,i,h,f){return this.each(function(){var k=this,m=-1,a;if(k.grid){if(isNaN(j))b(k.p.colModel).each(function(u){if(this.name==j){m=u;return false}});else m=parseInt(j,10);if(m>=0)if(a=k.rows.namedItem(g)){var r=b("td:eq("+m+")",a);if(i!==""){a=k.formatter(g,i,m,a,"edit");k.p.treeGrid&&b(".tree-wrap",b(r)).length>0?b("span",b(r)).html(a).attr("title",b.jgrid.stripHtml(a)):b(r).html(a).attr("title",b.jgrid.stripHtml(a))}if(typeof h==="string")h?b(r).addClass(h):b(r).removeClass();
else h&&b(r).css(h);typeof f==="object"&&b(r).attr(f)}}})},getCell:function(g,j){var i=false;this.each(function(){var h=this,f=-1;if(h.grid){if(isNaN(j))b(h.p.colModel).each(function(a){if(this.name===j){f=a;return false}});else f=parseInt(j,10);if(f>=0){var k=h.rows.namedItem(g);if(k)try{i=b.unformat(b("td:eq("+f+")",k),{colModel:h.p.colModel[f]},f)}catch(m){i=b.jgrid.htmlDecode(b("td:eq("+f+")",k).html())}}}});return i},getCol:function(g,j,i){var h=[],f,k=0;j=typeof j!="boolean"?false:j;if(typeof i==
"undefined")i=false;this.each(function(){var m=this,a=-1;if(m.grid){if(isNaN(g))b(m.p.colModel).each(function(A){if(this.name===g){a=A;return false}});else a=parseInt(g,10);if(a>=0){var r=m.rows.length,u=0;if(r&&r>0){for(;u<r;){try{f=b.unformat(b(m.rows[u].cells[a]),{colModel:m.p.colModel[a]},a)}catch(x){f=b.jgrid.htmlDecode(m.rows[u].cells[a].innerHTML)}i?(k+=parseFloat(f,10)):j?h.push({id:m.rows[u].id,value:f}):(h[u]=f);u++}if(i)switch(i.toLowerCase()){case "sum":h=k;break;case "avg":h=k/r;break;
case "count":h=r;break}}}}});return h},clearGridData:function(g){return this.each(function(){var j=this;if(j.grid){if(typeof g!="boolean")g=false;b("tbody:first tr",j.grid.bDiv).remove();j.p.footerrow&&g&&b(".ui-jqgrid-ftable td",j.grid.sDiv).html("&#160;");j.p.selrow=null;j.p.selarrrow=[];j.p.savedRow=[];j.p.records=0;j.p.page="0";j.p.lastpage="0";j.p.reccount=0;j.updatepager(true,false)}})},getInd:function(g,j){var i=false,h;this.each(function(){if(h=this.rows.namedItem(g))i=j===true?h:h.rowIndex});
return i}})})(jQuery);
