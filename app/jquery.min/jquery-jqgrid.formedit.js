(function(a){var c=null;a.jgrid.extend({searchGrid:function(e){e=a.extend({recreateFilter:false,drag:true,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:true,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,closeAfterSearch:false,closeAfterReset:false,closeOnEscape:false,multipleSearch:false,cloneSearchRowOnAdd:true,sopt:null,stringResult:undefined,onClose:null,useDataProxy:false,overlay:true},a.jgrid.search,e||{});return this.each(function(){function b(l,
u){u=l.p.postData[u.sFilter];if(typeof u=="string")u=a.jgrid.parse(u);if(u){u.groupOp&&l.SearchFilter.setGroupOp(u.groupOp);if(u.rules){var t,I=0,i=u.rules.length;for(t=false;I<i;I++){t=u.rules[I];if(t.field!==undefined&&t.op!==undefined&&t.data!==undefined)(t=l.SearchFilter.setFilter({sfref:l.SearchFilter.$.find(".sf:last"),filter:a.extend({},t)}))&&l.SearchFilter.add()}}}}function p(l){if(e.onClose){var u=e.onClose(l);if(typeof u=="boolean"&&!u)return}l.hide();e.overlay===true&&a(".jqgrid-overlay:first",
"#gbox_"+w.p.id).hide()}function F(){var l=a(".ui-searchFilter").length;if(l>1){var u=a("#"+o).css("zIndex");a("#"+o).css({zIndex:parseInt(u,10)+l})}a("#"+o).show();e.overlay===true&&a(".jqgrid-overlay:first","#gbox_"+w.p.id).show();try{a(":input:visible","#"+o)[0].focus()}catch(t){}}function y(l){var u=l!==undefined,t=a("#"+w.p.id),I={};if(e.multipleSearch===false){I[e.sField]=l.rules[0].field;I[e.sValue]=l.rules[0].data;I[e.sOper]=l.rules[0].op}else I[e.sFilter]=l;t[0].p.search=u;a.extend(t[0].p.postData,
I);t.trigger("reloadGrid",[{page:1}]);e.closeAfterSearch&&p(a("#"+o))}function z(l){l=l&&l.hasOwnProperty("reload")?l.reload:true;var u=a("#"+w.p.id),t={};u[0].p.search=false;if(e.multipleSearch===false)t[e.sField]=t[e.sValue]=t[e.sOper]="";else t[e.sFilter]="";a.extend(u[0].p.postData,t);l&&u.trigger("reloadGrid",[{page:1}]);e.closeAfterReset&&p(a("#"+o))}var w=this;if(w.grid){var o="fbox_"+w.p.id,m=true;if(a.fn.searchFilter){e.recreateFilter===true&&a("#"+o).remove();if(a("#"+o).html()!=null){if(a.isFunction(e.beforeShowSearch)){m=
e.beforeShowSearch(a("#"+o));if(typeof m=="undefined")m=true}if(m!==false){F();a.isFunction(e.afterShowSearch)&&e.afterShowSearch(a("#"+o))}}else{var r=[],v=a("#"+w.p.id).jqGrid("getGridParam","colNames"),d=a("#"+w.p.id).jqGrid("getGridParam","colModel"),q=["eq","ne","lt","le","gt","ge","bw","bn","in","ni","ew","en","cn","nc"],h,j,k,E=[];if(e.sopt!==null)for(h=k=0;h<e.sopt.length;h++){if((j=a.inArray(e.sopt[h],q))!=-1){E[k]={op:e.sopt[h],text:e.odata[j]};k++}}else for(h=0;h<q.length;h++)E[h]={op:q[h],
text:e.odata[h]};a.each(d,function(l,u){var t=typeof u.search==="undefined"?true:u.search,I=u.hidden===true;l=a.extend({},{text:v[l],itemval:u.index||u.name},this.searchoptions);u=l.searchhidden===true;if(typeof l.sopt!=="undefined"){k=0;l.ops=[];if(l.sopt.length>0)for(h=0;h<l.sopt.length;h++)if((j=a.inArray(l.sopt[h],q))!=-1){l.ops[k]={op:l.sopt[h],text:e.odata[j]};k++}}if(typeof this.stype==="undefined")this.stype="text";if(this.stype=="select")if(l.dataUrl===undefined){var i;if(l.value)i=l.value;
else if(this.editoptions)i=this.editoptions.value;if(i){l.dataValues=[];if(typeof i==="string"){i=i.split(";");var f;for(h=0;h<i.length;h++){f=i[h].split(":");l.dataValues[h]={value:f[0],text:f[1]}}}else if(typeof i==="object"){h=0;for(f in i)if(i.hasOwnProperty(f)){l.dataValues[h]={value:f,text:i[f]};h++}}}}if(u&&t||t&&!I)r.push(l)});if(r.length>0){a("<div id='"+o+"' role='dialog' tabindex='-1'></div>").insertBefore("#gview_"+w.p.id);if(e.stringResult===undefined)e.stringResult=e.multipleSearch;
w.SearchFilter=a("#"+o).searchFilter(r,{groupOps:e.groupOps,operators:E,onClose:p,resetText:e.Reset,searchText:e.Find,windowTitle:e.caption,rulesText:e.rulesText,matchText:e.matchText,onSearch:y,onReset:z,stringResult:e.stringResult,ajaxSelectOptions:a.extend({},a.jgrid.ajaxOptions,w.p.ajaxSelectOptions||{}),clone:e.cloneSearchRowOnAdd});a(".ui-widget-overlay","#"+o).remove();w.p.direction=="rtl"&&a(".ui-closer","#"+o).css("float","left");if(e.drag===true){a("#"+o+" table thead tr:first td:first").css("cursor",
"move");if(jQuery.fn.jqDrag)a("#"+o).jqDrag(a("#"+o+" table thead tr:first td:first"));else try{a("#"+o).draggable({handle:a("#"+o+" table thead tr:first td:first")})}catch(P){}}if(e.multipleSearch===false){a(".ui-del, .ui-add, .ui-del, .ui-add-last, .matchText, .rulesText","#"+o).hide();a("select[name='groupOp']","#"+o).hide()}e.multipleSearch===true&&e.loadDefaults===true&&b(w,e);a.isFunction(e.onInitializeSearch)&&e.onInitializeSearch(a("#"+o));if(a.isFunction(e.beforeShowSearch)){m=e.beforeShowSearch(a("#"+
o));if(typeof m=="undefined")m=true}if(m!==false){F();a.isFunction(e.afterShowSearch)&&e.afterShowSearch(a("#"+o));e.closeOnEscape===true&&a("#"+o).keydown(function(l){l.which==27&&p(a("#"+o));l.which==13&&a(".ui-search",this).click()})}}}}}})},editGridRow:function(e,b){c=b=a.extend({top:0,left:0,width:300,height:"auto",dataheight:"auto",modal:false,overlay:10,drag:true,resize:true,url:null,mtype:"POST",clearAfterAdd:true,closeAfterEdit:false,reloadAfterSubmit:true,onInitializeForm:null,beforeInitData:null,
beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:false,jqModal:true,closeOnEscape:false,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[false,13],navkeys:[false,38,40],checkOnSubmit:false,checkOnUpdate:false,_savedData:{},processing:false,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:true},a.jgrid.edit,b||{});return this.each(function(){function p(){a(".FormElement",
"#"+j).each(function(){var g=a(".customelement",this);if(g.length){var n=a(g[0]).attr("name");a.each(d.p.colModel,function(){if(this.name==n&&this.editoptions&&a.isFunction(this.editoptions.custom_value)){try{f[n]=this.editoptions.custom_value(a("#"+n,"#"+j),"get");if(f[n]===undefined)throw"e1";}catch(s){s=="e1"?a.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose):a.jgrid.info_dialog(jQuery.jgrid.errors.errcap,s.message,jQuery.jgrid.edit.bClose)}return true}})}else{switch(a(this).get(0).type){case "checkbox":if(a(this).attr("checked"))f[this.name]=
a(this).val();else{g=a(this).attr("offval");f[this.name]=g}break;case "select-one":f[this.name]=a("option:selected",this).val();J[this.name]=a("option:selected",this).text();break;case "select-multiple":f[this.name]=a(this).val();f[this.name]=f[this.name]?f[this.name].join(","):"";var x=[];a("option:selected",this).each(function(s,G){x[s]=a(G).text()});J[this.name]=x.join(",");break;case "password":case "text":case "textarea":case "button":f[this.name]=a(this).val();break}if(d.p.autoencode)f[this.name]=
a.jgrid.htmlEncode(f[this.name])}});return true}function F(g,n,x,s){for(var G,B,C,L=0,A,M,D,S=[],H=false,aa="",Q=1;Q<=s;Q++)aa+="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>";if(g!="_empty")H=a(n).jqGrid("getInd",g);a(n.p.colModel).each(function(U){G=this.name;M=(B=this.editrules&&this.editrules.edithidden===true?false:this.hidden===true?true:false)?"style='display:none'":"";if(G!=="cb"&&G!=="subgrid"&&this.editable===true&&G!=="rn"){if(H===false)A="";else if(G==n.p.ExpandColumn&&
n.p.treeGrid===true)A=a("td:eq("+U+")",n.rows[H]).text();else try{A=a.unformat(a("td:eq("+U+")",n.rows[H]),{rowId:g,colModel:this},U)}catch(da){A=a("td:eq("+U+")",n.rows[H]).html()}var W=a.extend({},this.editoptions||{},{id:G,name:G}),X=a.extend({},{elmprefix:"",elmsuffix:"",rowabove:false,rowcontent:""},this.formoptions||{}),ba=parseInt(X.rowpos,10)||L+1,ea=parseInt((parseInt(X.colpos,10)||1)*2,10);if(g=="_empty"&&W.defaultValue)A=a.isFunction(W.defaultValue)?W.defaultValue():W.defaultValue;if(!this.edittype)this.edittype=
"text";if(d.p.autoencode)A=a.jgrid.htmlDecode(A);D=a.jgrid.createEl(this.edittype,W,A,false,a.extend({},a.jgrid.ajaxOptions,n.p.ajaxSelectOptions||{}));if(A===""&&this.edittype=="checkbox")A=a(D).attr("offval");if(A===""&&this.edittype=="select")A=a("option:eq(0)",D).text();if(c.checkOnSubmit||c.checkOnUpdate)c._savedData[G]=A;a(D).addClass("FormElement");if(this.edittype=="text"||this.edittype=="textarea")a(D).addClass("ui-widget-content ui-corner-all");C=a(x).find("tr[rowpos="+ba+"]");if(X.rowabove){W=
a("<tr><td class='contentinfo' colspan='"+s*2+"'>"+X.rowcontent+"</td></tr>");a(x).append(W);W[0].rp=ba}if(C.length===0){C=a("<tr "+M+" rowpos='"+ba+"'></tr>").addClass("FormData").attr("id","tr_"+G);a(C).append(aa);a(x).append(C);C[0].rp=ba}a("td:eq("+(ea-2)+")",C[0]).html(typeof X.label==="undefined"?n.p.colNames[U]:X.label);a("td:eq("+(ea-1)+")",C[0]).append(X.elmprefix).append(D).append(X.elmsuffix);S[L]=U;L++}});if(L>0){Q=a("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+
(s*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+n.p.id+"_id' value='"+g+"'/></td></tr>");Q[0].rp=L+999;a(x).append(Q);if(c.checkOnSubmit||c.checkOnUpdate)c._savedData[n.p.id+"_id"]=g}return S}function y(g,n,x){var s,G=0,B,C,L,A,M;if(c.checkOnSubmit||c.checkOnUpdate){c._savedData={};c._savedData[n.p.id+"_id"]=g}var D=n.p.colModel;if(g=="_empty"){a(D).each(function(){s=this.name;L=a.extend({},this.editoptions||{});C=a("#"+a.jgrid.jqID(s),"#"+x);if(C[0]!=null){A="";
if(L.defaultValue){A=a.isFunction(L.defaultValue)?L.defaultValue():L.defaultValue;if(C[0].type=="checkbox"){M=A.toLowerCase();if(M.search(/(false|0|no|off|undefined)/i)<0&&M!==""){C[0].checked=true;C[0].defaultChecked=true;C[0].value=A}else C.attr({checked:"",defaultChecked:""})}else C.val(A)}else if(C[0].type=="checkbox"){C[0].checked=false;C[0].defaultChecked=false;A=a(C).attr("offval")}else if(C[0].type&&C[0].type.substr(0,6)=="select")C[0].selectedIndex=0;else C.val(A);if(c.checkOnSubmit===true||
c.checkOnUpdate)c._savedData[s]=A}});a("#id_g","#"+x).val(g)}else{var S=a(n).jqGrid("getInd",g,true);if(S){a("td",S).each(function(H){s=D[H].name;if(s!=="cb"&&s!=="subgrid"&&s!=="rn"&&D[H].editable===true){if(s==n.p.ExpandColumn&&n.p.treeGrid===true)B=a(this).text();else try{B=a.unformat(a(this),{rowId:g,colModel:D[H]},H)}catch(aa){B=a(this).html()}if(d.p.autoencode)B=a.jgrid.htmlDecode(B);if(c.checkOnSubmit===true||c.checkOnUpdate)c._savedData[s]=B;s=a.jgrid.jqID(s);switch(D[H].edittype){case "password":case "text":case "button":case "image":a("#"+
s,"#"+x).val(B);break;case "textarea":if(B=="&nbsp;"||B=="&#160;"||B.length==1&&B.charCodeAt(0)==160)B="";a("#"+s,"#"+x).val(B);break;case "select":var Q=B.split(",");Q=a.map(Q,function(da){return a.trim(da)});a("#"+s+" option","#"+x).each(function(){this.selected=!D[H].editoptions.multiple&&(Q[0]==a.trim(a(this).text())||Q[0]==a.trim(a(this).val()))?true:D[H].editoptions.multiple?a.inArray(a.trim(a(this).text()),Q)>-1||a.inArray(a.trim(a(this).val()),Q)>-1?true:false:false});break;case "checkbox":B+=
"";if(D[H].editoptions&&D[H].editoptions.value)if(D[H].editoptions.value.split(":")[0]==B){a("#"+s,"#"+x).attr("checked",true);a("#"+s,"#"+x).attr("defaultChecked",true)}else{a("#"+s,"#"+x).attr("checked",false);a("#"+s,"#"+x).attr("defaultChecked","")}else{B=B.toLowerCase();if(B.search(/(false|0|no|off|undefined)/i)<0&&B!==""){a("#"+s,"#"+x).attr("checked",true);a("#"+s,"#"+x).attr("defaultChecked",true)}else{a("#"+s,"#"+x).attr("checked",false);a("#"+s,"#"+x).attr("defaultChecked","")}}break;case "custom":try{if(D[H].editoptions&&
a.isFunction(D[H].editoptions.custom_value))D[H].editoptions.custom_value(a("#"+s,"#"+x),"set",B);else throw"e1";}catch(U){U=="e1"?a.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose):a.jgrid.info_dialog(jQuery.jgrid.errors.errcap,U.message,jQuery.jgrid.edit.bClose)}break}G++}});G>0&&a("#id_g","#"+j).val(g)}}}function z(){var g,n=[true,"",""],x={},s=d.p.prmNames,G,B;if(a.isFunction(c.beforeCheckValues)){var C=c.beforeCheckValues(f,
a("#"+h),f[d.p.id+"_id"]=="_empty"?s.addoper:s.editoper);if(C&&typeof C==="object")f=C}for(var L in f)if(f.hasOwnProperty(L)){n=a.jgrid.checkValues(f[L],L,d);if(n[0]===false)break}if(n[0]){if(a.isFunction(c.onclickSubmit))x=c.onclickSubmit(c,f)||{};if(a.isFunction(c.beforeSubmit))n=c.beforeSubmit(f,a("#"+h))}if(n[0]&&!c.processing){c.processing=true;a("#sData","#"+j+"_2").addClass("ui-state-active");B=s.oper;G=s.id;f[B]=a.trim(f[d.p.id+"_id"])=="_empty"?s.addoper:s.editoper;if(f[B]!=s.addoper)f[G]=
f[d.p.id+"_id"];else if(f[G]===undefined)f[G]=f[d.p.id+"_id"];delete f[d.p.id+"_id"];f=a.extend(f,c.editData,x);x=a.extend({url:c.url?c.url:a(d).jqGrid("getGridParam","editurl"),type:c.mtype,data:a.isFunction(c.serializeEditData)?c.serializeEditData(f):f,complete:function(A,M){if(M!="success"){n[0]=false;n[1]=a.isFunction(c.errorTextFormat)?c.errorTextFormat(A):M+" Status: '"+A.statusText+"'. Error code: "+A.status}else if(a.isFunction(c.afterSubmit))n=c.afterSubmit(A,f);if(n[0]===false){a("#FormError>td",
"#"+j).html(n[1]);a("#FormError","#"+j).show()}else{a.each(d.p.colModel,function(){if(J[this.name]&&this.formatter&&this.formatter=="select")try{delete J[this.name]}catch(H){}});f=a.extend(f,J);d.p.autoencode&&a.each(f,function(H,aa){f[H]=a.jgrid.htmlDecode(aa)});c.reloadAfterSubmit=c.reloadAfterSubmit&&d.p.datatype!="local";if(f[B]==s.addoper){n[2]||(n[2]=parseInt(d.p.records,10)+1+"");f[G]=n[2];if(c.closeAfterAdd){if(c.reloadAfterSubmit)a(d).trigger("reloadGrid");else{a(d).jqGrid("addRowData",n[2],
f,b.addedrow);a(d).jqGrid("setSelection",n[2])}a.jgrid.hideModal("#"+k.themodal,{gb:"#gbox_"+q,jqm:b.jqModal,onClose:c.onClose})}else if(c.clearAfterAdd){c.reloadAfterSubmit?a(d).trigger("reloadGrid"):a(d).jqGrid("addRowData",n[2],f,b.addedrow);y("_empty",d,h)}else c.reloadAfterSubmit?a(d).trigger("reloadGrid"):a(d).jqGrid("addRowData",n[2],f,b.addedrow)}else{if(c.reloadAfterSubmit){a(d).trigger("reloadGrid");c.closeAfterEdit||setTimeout(function(){a(d).jqGrid("setSelection",f[G])},1E3)}else d.p.treeGrid===
true?a(d).jqGrid("setTreeRow",f[G],f):a(d).jqGrid("setRowData",f[G],f);c.closeAfterEdit&&a.jgrid.hideModal("#"+k.themodal,{gb:"#gbox_"+q,jqm:b.jqModal,onClose:c.onClose})}if(a.isFunction(c.afterComplete)){g=A;setTimeout(function(){c.afterComplete(g,f,a("#"+h));g=null},500)}}c.processing=false;if(c.checkOnSubmit||c.checkOnUpdate){a("#"+h).data("disabled",false);if(c._savedData[d.p.id+"_id"]!="_empty")for(var D in c._savedData)if(f[D])c._savedData[D]=f[D]}a("#sData","#"+j+"_2").removeClass("ui-state-active");
try{a(":input:visible","#"+h)[0].focus()}catch(S){}},error:function(A,M,D){a("#FormError>td","#"+j).html(M+" : "+D);a("#FormError","#"+j).show();c.processing=false;a("#"+h).data("disabled",false);a("#sData","#"+j+"_2").removeClass("ui-state-active")}},a.jgrid.ajaxOptions,c.ajaxEditOptions);if(!x.url&&!c.useDataProxy)if(a.isFunction(d.p.dataProxy))c.useDataProxy=true;else{n[0]=false;n[1]+=" "+a.jgrid.errors.nourl}if(n[0])c.useDataProxy?d.p.dataProxy.call(d,x,"set_"+d.p.id):a.ajax(x)}if(n[0]===false){a("#FormError>td",
"#"+j).html(n[1]);a("#FormError","#"+j).show()}}function w(g,n){var x=false,s;for(s in g)if(g[s]!=n[s]){x=true;break}return x}function o(){var g=true;a("#FormError","#"+j).hide();if(c.checkOnUpdate){f={};J={};p();R=a.extend({},f,J);if(O=w(R,c._savedData)){a("#"+h).data("disabled",true);a(".confirm","#"+k.themodal).show();g=false}}return g}function m(){if(e!=="_empty"&&typeof d.p.savedRow!=="undefined"&&d.p.savedRow.length>0&&a.isFunction(a.fn.jqGrid.restoreRow))for(var g=0;g<d.p.savedRow.length;g++)if(d.p.savedRow[g].id==
e){a(d).jqGrid("restoreRow",e);break}}function r(g,n){g===0?a("#pData","#"+j+"_2").addClass("ui-state-disabled"):a("#pData","#"+j+"_2").removeClass("ui-state-disabled");g==n?a("#nData","#"+j+"_2").addClass("ui-state-disabled"):a("#nData","#"+j+"_2").removeClass("ui-state-disabled")}function v(){var g=a(d).jqGrid("getDataIDs"),n=a("#id_g","#"+j).val();return[a.inArray(n,g),g]}var d=this;if(d.grid&&e){var q=d.p.id,h="FrmGrid_"+q,j="TblGrid_"+q,k={themodal:"editmod"+q,modalhead:"edithd"+q,modalcontent:"editcnt"+
q,scrollelm:h},E=a.isFunction(c.beforeShowForm)?c.beforeShowForm:false,P=a.isFunction(c.afterShowForm)?c.afterShowForm:false,l=a.isFunction(c.beforeInitData)?c.beforeInitData:false,u=a.isFunction(c.onInitializeForm)?c.onInitializeForm:false,t=true,I=1,i=0,f,J,R,O;if(e=="new"){e="_empty";b.caption=b.addCaption}else b.caption=b.editCaption;b.recreateForm===true&&a("#"+k.themodal).html()!=null&&a("#"+k.themodal).remove();var T=true;if(b.checkOnUpdate&&b.jqModal&&!b.modal)T=false;if(a("#"+k.themodal).html()!=
null){if(l){t=l(a("#"+h));if(typeof t=="undefined")t=true}if(t===false)return;m();a(".ui-jqdialog-title","#"+k.modalhead).html(b.caption);a("#FormError","#"+j).hide();if(c.topinfo){a(".topinfo","#"+j+"_2").html(c.topinfo);a(".tinfo","#"+j+"_2").show()}else a(".tinfo","#"+j+"_2").hide();if(c.bottominfo){a(".bottominfo","#"+j+"_2").html(c.bottominfo);a(".binfo","#"+j+"_2").show()}else a(".binfo","#"+j+"_2").hide();y(e,d,h);e=="_empty"||!c.viewPagerButtons?a("#pData, #nData","#"+j+"_2").hide():a("#pData, #nData",
"#"+j+"_2").show();if(c.processing===true){c.processing=false;a("#sData","#"+j+"_2").removeClass("ui-state-active")}if(a("#"+h).data("disabled")===true){a(".confirm","#"+k.themodal).hide();a("#"+h).data("disabled",false)}E&&E(a("#"+h));a("#"+k.themodal).data("onClose",c.onClose);a.jgrid.viewModal("#"+k.themodal,{gbox:"#gbox_"+q,jqm:b.jqModal,jqM:false,overlay:b.overlay,modal:b.modal});T||a(".jqmOverlay").click(function(){if(!o())return false;a.jgrid.hideModal("#"+k.themodal,{gb:"#gbox_"+q,jqm:b.jqModal,
onClose:c.onClose});return false});P&&P(a("#"+h))}else{var K=isNaN(b.dataheight)?b.dataheight:b.dataheight+"px";K=a("<form name='FormPost' id='"+h+"' class='FormGrid' onSubmit='return false;' style='width:100%;overflow:auto;position:relative;height:"+K+";'></form>").data("disabled",false);var N=a("<table id='"+j+"' class='EditTable' cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>");if(l){t=l(a("#"+h));if(typeof t=="undefined")t=true}if(t===false)return;m();a(d.p.colModel).each(function(){var g=
this.formoptions;I=Math.max(I,g?g.colpos||0:0);i=Math.max(i,g?g.rowpos||0:0)});a(K).append(N);l=a("<tr id='FormError' style='display:none'><td class='ui-state-error' colspan='"+I*2+"'></td></tr>");l[0].rp=0;a(N).append(l);l=a("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+I*2+"'>"+c.topinfo+"</td></tr>");l[0].rp=0;a(N).append(l);t=(l=d.p.direction=="rtl"?true:false)?"nData":"pData";var V=l?"pData":"nData";F(e,d,N,I);t="<a href='javascript:void(0)' id='"+t+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></div>";
V="<a href='javascript:void(0)' id='"+V+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></div>";var Z="<a href='javascript:void(0)' id='sData' class='fm-button ui-state-default ui-corner-all'>"+b.bSubmit+"</a>",$="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+b.bCancel+"</a>";t="<table border='0' cellspacing='0' cellpadding='0' class='EditTable' id='"+j+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+
(l?V+t:t+V)+"</td><td class='EditButton'>"+Z+$+"</td></tr>";t+="<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+c.bottominfo+"</td></tr>";t+="</tbody></table>";if(i>0){var Y=[];a.each(a(N)[0].rows,function(g,n){Y[g]=n});Y.sort(function(g,n){if(g.rp>n.rp)return 1;if(g.rp<n.rp)return-1;return 0});a.each(Y,function(g,n){a("tbody",N).append(n)})}b.gbox="#gbox_"+q;var ca=false;if(b.closeOnEscape===true){b.closeOnEscape=false;ca=true}K=a("<span></span>").append(K).append(t);
a.jgrid.createModal(k,K,b,"#gview_"+d.p.id,a("#gbox_"+d.p.id)[0]);if(l){a("#pData, #nData","#"+j+"_2").css("float","right");a(".EditButton","#"+j+"_2").css("text-align","left")}c.topinfo&&a(".tinfo","#"+j+"_2").show();c.bottominfo&&a(".binfo","#"+j+"_2").show();t=K=null;a("#"+k.themodal).keydown(function(g){var n=g.target;if(a("#"+h).data("disabled")===true)return false;if(c.savekey[0]===true&&g.which==c.savekey[1])if(n.tagName!="TEXTAREA"){a("#sData","#"+j+"_2").trigger("click");return false}if(g.which===
27){if(!o())return false;ca&&a.jgrid.hideModal(this,{gb:b.gbox,jqm:b.jqModal,onClose:c.onClose});return false}if(c.navkeys[0]===true){if(a("#id_g","#"+j).val()=="_empty")return true;if(g.which==c.navkeys[1]){a("#pData","#"+j+"_2").trigger("click");return false}if(g.which==c.navkeys[2]){a("#nData","#"+j+"_2").trigger("click");return false}}});if(b.checkOnUpdate){a("a.ui-jqdialog-titlebar-close span","#"+k.themodal).removeClass("jqmClose");a("a.ui-jqdialog-titlebar-close","#"+k.themodal).unbind("click").click(function(){if(!o())return false;
a.jgrid.hideModal("#"+k.themodal,{gb:"#gbox_"+q,jqm:b.jqModal,onClose:c.onClose});return false})}b.saveicon=a.extend([true,"left","ui-icon-disk"],b.saveicon);b.closeicon=a.extend([true,"left","ui-icon-close"],b.closeicon);if(b.saveicon[0]===true)a("#sData","#"+j+"_2").addClass(b.saveicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+b.saveicon[2]+"'></span>");if(b.closeicon[0]===true)a("#cData","#"+j+"_2").addClass(b.closeicon[1]=="right"?"fm-button-icon-right":
"fm-button-icon-left").append("<span class='ui-icon "+b.closeicon[2]+"'></span>");if(c.checkOnSubmit||c.checkOnUpdate){Z="<a href='javascript:void(0)' id='sNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+b.bYes+"</a>";V="<a href='javascript:void(0)' id='nNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+b.bNo+"</a>";$="<a href='javascript:void(0)' id='cNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+b.bExit+"</a>";
K=b.zIndex||999;K++;a("<div class='ui-widget-overlay jqgrid-overlay confirm' style='z-index:"+K+";display:none;'>&#160;"+(a.browser.msie&&a.browser.version==6?'<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"></iframe>':"")+"</div><div class='confirm ui-widget-content ui-jqconfirm' style='z-index:"+(K+1)+"'>"+b.saveData+"<br/><br/>"+Z+V+$+"</div>").insertAfter("#"+h);a("#sNew","#"+k.themodal).click(function(){z();a("#"+h).data("disabled",
false);a(".confirm","#"+k.themodal).hide();return false});a("#nNew","#"+k.themodal).click(function(){a(".confirm","#"+k.themodal).hide();a("#"+h).data("disabled",false);setTimeout(function(){a(":input","#"+h)[0].focus()},0);return false});a("#cNew","#"+k.themodal).click(function(){a(".confirm","#"+k.themodal).hide();a("#"+h).data("disabled",false);a.jgrid.hideModal("#"+k.themodal,{gb:"#gbox_"+q,jqm:b.jqModal,onClose:c.onClose});return false})}u&&u(a("#"+h));e=="_empty"||!c.viewPagerButtons?a("#pData,#nData",
"#"+j+"_2").hide():a("#pData,#nData","#"+j+"_2").show();E&&E(a("#"+h));a("#"+k.themodal).data("onClose",c.onClose);a.jgrid.viewModal("#"+k.themodal,{gbox:"#gbox_"+q,jqm:b.jqModal,overlay:b.overlay,modal:b.modal});T||a(".jqmOverlay").click(function(){if(!o())return false;a.jgrid.hideModal("#"+k.themodal,{gb:"#gbox_"+q,jqm:b.jqModal,onClose:c.onClose});return false});P&&P(a("#"+h));a(".fm-button","#"+k.themodal).hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});
a("#sData","#"+j+"_2").click(function(){f={};J={};a("#FormError","#"+j).hide();p();if(f[d.p.id+"_id"]=="_empty")z();else if(b.checkOnSubmit===true){R=a.extend({},f,J);if(O=w(R,c._savedData)){a("#"+h).data("disabled",true);a(".confirm","#"+k.themodal).show()}else z()}else z();return false});a("#cData","#"+j+"_2").click(function(){if(!o())return false;a.jgrid.hideModal("#"+k.themodal,{gb:"#gbox_"+q,jqm:b.jqModal,onClose:c.onClose});return false});a("#nData","#"+j+"_2").click(function(){if(!o())return false;
a("#FormError","#"+j).hide();var g=v();g[0]=parseInt(g[0],10);if(g[0]!=-1&&g[1][g[0]+1]){a.isFunction(b.onclickPgButtons)&&b.onclickPgButtons("next",a("#"+h),g[1][g[0]]);y(g[1][g[0]+1],d,h);a(d).jqGrid("setSelection",g[1][g[0]+1]);a.isFunction(b.afterclickPgButtons)&&b.afterclickPgButtons("next",a("#"+h),g[1][g[0]+1]);r(g[0]+1,g[1].length-1)}return false});a("#pData","#"+j+"_2").click(function(){if(!o())return false;a("#FormError","#"+j).hide();var g=v();if(g[0]!=-1&&g[1][g[0]-1]){a.isFunction(b.onclickPgButtons)&&
b.onclickPgButtons("prev",a("#"+h),g[1][g[0]]);y(g[1][g[0]-1],d,h);a(d).jqGrid("setSelection",g[1][g[0]-1]);a.isFunction(b.afterclickPgButtons)&&b.afterclickPgButtons("prev",a("#"+h),g[1][g[0]-1]);r(g[0]-1,g[1].length-1)}return false})}E=v();r(E[0],E[1].length-1)}})},viewGridRow:function(e,b){b=a.extend({top:0,left:0,width:0,height:"auto",dataheight:"auto",modal:false,overlay:10,drag:true,resize:true,jqModal:true,closeOnEscape:false,labelswidth:"30%",closeicon:[],navkeys:[false,38,40],onClose:null,
beforeShowForm:null,beforeInitData:null,viewPagerButtons:true},a.jgrid.view,b||{});return this.each(function(){function p(){if(b.closeOnEscape===true||b.navkeys[0]===true)setTimeout(function(){a(".ui-jqdialog-titlebar-close","#"+d.modalhead).focus()},0)}function F(i,f,J,R){for(var O,T,K,N=0,V,Z,$=[],Y=false,ca="<td class='CaptionTD form-view-label ui-widget-content' width='"+b.labelswidth+"'>&#160;</td><td class='DataTD form-view-data ui-helper-reset ui-widget-content'>&#160;</td>",g="",n=["integer",
"number","currency"],x=0,s=0,G,B,C,L=1;L<=R;L++)g+=L==1?ca:"<td class='CaptionTD form-view-label ui-widget-content'>&#160;</td><td class='DataTD form-view-data ui-widget-content'>&#160;</td>";a(f.p.colModel).each(function(){T=this.editrules&&this.editrules.edithidden===true?false:this.hidden===true?true:false;if(!T&&this.align==="right")if(this.formatter&&a.inArray(this.formatter,n)!==-1)x=Math.max(x,parseInt(this.width,10));else s=Math.max(s,parseInt(this.width,10))});G=x!==0?x:s!==0?s:0;Y=a(f).jqGrid("getInd",
i);a(f.p.colModel).each(function(A){O=this.name;B=false;Z=(T=this.editrules&&this.editrules.edithidden===true?false:this.hidden===true?true:false)?"style='display:none'":"";C=typeof this.viewable!="boolean"?true:this.viewable;if(O!=="cb"&&O!=="subgrid"&&O!=="rn"&&C){V=Y===false?"":O==f.p.ExpandColumn&&f.p.treeGrid===true?a("td:eq("+A+")",f.rows[Y]).text():a("td:eq("+A+")",f.rows[Y]).html();B=this.align==="right"&&G!==0?true:false;a.extend({},this.editoptions||{},{id:O,name:O});var M=a.extend({},{rowabove:false,
rowcontent:""},this.formoptions||{}),D=parseInt(M.rowpos,10)||N+1,S=parseInt((parseInt(M.colpos,10)||1)*2,10);if(M.rowabove){var H=a("<tr><td class='contentinfo' colspan='"+R*2+"'>"+M.rowcontent+"</td></tr>");a(J).append(H);H[0].rp=D}K=a(J).find("tr[rowpos="+D+"]");if(K.length===0){K=a("<tr "+Z+" rowpos='"+D+"'></tr>").addClass("FormData").attr("id","trv_"+O);a(K).append(g);a(J).append(K);K[0].rp=D}a("td:eq("+(S-2)+")",K[0]).html("<b>"+(typeof M.label==="undefined"?f.p.colNames[A]:M.label)+"</b>");
a("td:eq("+(S-1)+")",K[0]).append("<span>"+V+"</span>").attr("id","v_"+O);B&&a("td:eq("+(S-1)+") span",K[0]).css({"text-align":"right",width:G+"px"});$[N]=A;N++}});if(N>0){i=a("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(R*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+i+"'/></td></tr>");i[0].rp=N+99;a(J).append(i)}return $}function y(i,f){var J,R,O=0,T,K;if(K=a(f).jqGrid("getInd",i,true)){a("td",K).each(function(N){J=
f.p.colModel[N].name;R=f.p.colModel[N].editrules&&f.p.colModel[N].editrules.edithidden===true?false:f.p.colModel[N].hidden===true?true:false;if(J!=="cb"&&J!=="subgrid"&&J!=="rn"){T=J==f.p.ExpandColumn&&f.p.treeGrid===true?a(this).text():a(this).html();a.extend({},f.p.colModel[N].editoptions||{});J=a.jgrid.jqID("v_"+J);a("#"+J+" span","#"+v).html(T);R&&a("#"+J,"#"+v).parents("tr:first").hide();O++}});O>0&&a("#id_g","#"+v).val(i)}}function z(i,f){i===0?a("#pData","#"+v+"_2").addClass("ui-state-disabled"):
a("#pData","#"+v+"_2").removeClass("ui-state-disabled");i==f?a("#nData","#"+v+"_2").addClass("ui-state-disabled"):a("#nData","#"+v+"_2").removeClass("ui-state-disabled")}function w(){var i=a(o).jqGrid("getDataIDs"),f=a("#id_g","#"+v).val();return[a.inArray(f,i),i]}var o=this;if(o.grid&&e){if(!b.imgpath)b.imgpath=o.p.imgpath;var m=o.p.id,r="ViewGrid_"+m,v="ViewTbl_"+m,d={themodal:"viewmod"+m,modalhead:"viewhd"+m,modalcontent:"viewcnt"+m,scrollelm:r},q=a.isFunction(b.beforeInitData)?b.beforeInitData:
false,h=true,j=1,k=0;if(a("#"+d.themodal).html()!=null){if(q){h=q(a("#"+r));if(typeof h=="undefined")h=true}if(h===false)return;a(".ui-jqdialog-title","#"+d.modalhead).html(b.caption);a("#FormError","#"+v).hide();y(e,o);a.isFunction(b.beforeShowForm)&&b.beforeShowForm(a("#"+r));a.jgrid.viewModal("#"+d.themodal,{gbox:"#gbox_"+m,jqm:b.jqModal,jqM:false,overlay:b.overlay,modal:b.modal});p()}else{var E=isNaN(b.dataheight)?b.dataheight:b.dataheight+"px";E=a("<form name='FormPost' id='"+r+"' class='FormGrid' style='width:100%;overflow:auto;position:relative;height:"+
E+";'></form>");var P=a("<table id='"+v+"' class='EditTable' cellspacing='1' cellpadding='2' border='0' style='table-layout:fixed'><tbody></tbody></table>");if(q){h=q(a("#"+r));if(typeof h=="undefined")h=true}if(h===false)return;a(o.p.colModel).each(function(){var i=this.formoptions;j=Math.max(j,i?i.colpos||0:0);k=Math.max(k,i?i.rowpos||0:0)});a(E).append(P);F(e,o,P,j);q=o.p.direction=="rtl"?true:false;h="<a href='javascript:void(0)' id='"+(q?"nData":"pData")+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>";
var l="<a href='javascript:void(0)' id='"+(q?"pData":"nData")+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",u="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+b.bClose+"</a>";if(k>0){var t=[];a.each(a(P)[0].rows,function(i,f){t[i]=f});t.sort(function(i,f){if(i.rp>f.rp)return 1;if(i.rp<f.rp)return-1;return 0});a.each(t,function(i,f){a("tbody",P).append(f)})}b.gbox="#gbox_"+m;var I=false;if(b.closeOnEscape===
true){b.closeOnEscape=false;I=true}E=a("<span></span>").append(E).append("<table border='0' class='EditTable' id='"+v+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+b.labelswidth+"'>"+(q?l+h:h+l)+"</td><td class='EditButton'>"+u+"</td></tr></tbody></table>");a.jgrid.createModal(d,E,b,"#gview_"+o.p.id,a("#gview_"+o.p.id)[0]);if(q){a("#pData, #nData","#"+v+"_2").css("float","right");a(".EditButton","#"+v+"_2").css("text-align","left")}b.viewPagerButtons||a("#pData, #nData","#"+v+"_2").hide();
E=null;a("#"+d.themodal).keydown(function(i){if(i.which===27){I&&a.jgrid.hideModal(this,{gb:b.gbox,jqm:b.jqModal,onClose:b.onClose});return false}if(b.navkeys[0]===true){if(i.which===b.navkeys[1]){a("#pData","#"+v+"_2").trigger("click");return false}if(i.which===b.navkeys[2]){a("#nData","#"+v+"_2").trigger("click");return false}}});b.closeicon=a.extend([true,"left","ui-icon-close"],b.closeicon);if(b.closeicon[0]===true)a("#cData","#"+v+"_2").addClass(b.closeicon[1]=="right"?"fm-button-icon-right":
"fm-button-icon-left").append("<span class='ui-icon "+b.closeicon[2]+"'></span>");a.isFunction(b.beforeShowForm)&&b.beforeShowForm(a("#"+r));a.jgrid.viewModal("#"+d.themodal,{gbox:"#gbox_"+m,jqm:b.jqModal,modal:b.modal});a(".fm-button:not(.ui-state-disabled)","#"+v+"_2").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});p();a("#cData","#"+v+"_2").click(function(){a.jgrid.hideModal("#"+d.themodal,{gb:"#gbox_"+m,jqm:b.jqModal,onClose:b.onClose});
return false});a("#nData","#"+v+"_2").click(function(){a("#FormError","#"+v).hide();var i=w();i[0]=parseInt(i[0],10);if(i[0]!=-1&&i[1][i[0]+1]){a.isFunction(b.onclickPgButtons)&&b.onclickPgButtons("next",a("#"+r),i[1][i[0]]);y(i[1][i[0]+1],o);a(o).jqGrid("setSelection",i[1][i[0]+1]);a.isFunction(b.afterclickPgButtons)&&b.afterclickPgButtons("next",a("#"+r),i[1][i[0]+1]);z(i[0]+1,i[1].length-1)}p();return false});a("#pData","#"+v+"_2").click(function(){a("#FormError","#"+v).hide();var i=w();if(i[0]!=
-1&&i[1][i[0]-1]){a.isFunction(b.onclickPgButtons)&&b.onclickPgButtons("prev",a("#"+r),i[1][i[0]]);y(i[1][i[0]-1],o);a(o).jqGrid("setSelection",i[1][i[0]-1]);a.isFunction(b.afterclickPgButtons)&&b.afterclickPgButtons("prev",a("#"+r),i[1][i[0]-1]);z(i[0]-1,i[1].length-1)}p();return false})}E=w();z(E[0],E[1].length-1)}})},delGridRow:function(e,b){c=b=a.extend({top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:false,overlay:10,drag:true,resize:true,url:"",mtype:"POST",reloadAfterSubmit:true,
beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:true,closeOnEscape:false,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:false,serializeDelData:null,useDataProxy:false},a.jgrid.del,b||{});return this.each(function(){var p=this;if(p.grid)if(e){var F=typeof b.beforeShowForm==="function"?true:false,y=typeof b.afterShowForm==="function"?true:false,z=a.isFunction(b.beforeInitData)?b.beforeInitData:false,
w=p.p.id,o={},m=true,r="DelTbl_"+w,v,d,q,h,j={themodal:"delmod"+w,modalhead:"delhd"+w,modalcontent:"delcnt"+w,scrollelm:r};if(jQuery.isArray(e))e=e.join();if(a("#"+j.themodal).html()!=null){if(z){m=z();if(typeof m=="undefined")m=true}if(m===false)return;a("#DelData>td","#"+r).text(e);a("#DelError","#"+r).hide();if(c.processing===true){c.processing=false;a("#dData","#"+r).removeClass("ui-state-active")}F&&b.beforeShowForm(a("#"+r));a.jgrid.viewModal("#"+j.themodal,{gbox:"#gbox_"+w,jqm:b.jqModal,jqM:false,
overlay:b.overlay,modal:b.modal})}else{if(z){m=z();if(typeof m=="undefined")m=true}if(m===false)return;z=isNaN(b.dataheight)?b.dataheight:b.dataheight+"px";z="<div id='"+r+"' class='formdata' style='width:100%;overflow:auto;position:relative;height:"+z+";'>";z+="<table class='DelTable'><tbody>";z+="<tr id='DelError' style='display:none'><td class='ui-state-error'></td></tr>";z+="<tr id='DelData' style='display:none'><td >"+e+"</td></tr>";z+='<tr><td class="delmsg" style="white-space:pre;">'+b.msg+
"</td></tr><tr><td >&#160;</td></tr>";z+="</tbody></table></div>";z+="<table cellspacing='0' cellpadding='0' border='0' class='EditTable' id='"+r+"_2'><tbody><tr><td><hr class='ui-widget-content' style='margin:1px'/></td></tr></tr><tr><td class='DelButton EditButton'>"+("<a href='javascript:void(0)' id='dData' class='fm-button ui-state-default ui-corner-all'>"+b.bSubmit+"</a>")+"&#160;"+("<a href='javascript:void(0)' id='eData' class='fm-button ui-state-default ui-corner-all'>"+b.bCancel+"</a>")+
"</td></tr></tbody></table>";b.gbox="#gbox_"+w;a.jgrid.createModal(j,z,b,"#gview_"+p.p.id,a("#gview_"+p.p.id)[0]);a(".fm-button","#"+r+"_2").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});b.delicon=a.extend([true,"left","ui-icon-scissors"],b.delicon);b.cancelicon=a.extend([true,"left","ui-icon-cancel"],b.cancelicon);if(b.delicon[0]===true)a("#dData","#"+r+"_2").addClass(b.delicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+
b.delicon[2]+"'></span>");if(b.cancelicon[0]===true)a("#eData","#"+r+"_2").addClass(b.cancelicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+b.cancelicon[2]+"'></span>");a("#dData","#"+r+"_2").click(function(){var k=[true,""];o={};var E=a("#DelData>td","#"+r).text();if(typeof b.onclickSubmit==="function")o=b.onclickSubmit(c,E)||{};if(typeof b.beforeSubmit==="function")k=b.beforeSubmit(E);if(k[0]&&!c.processing){c.processing=true;a(this).addClass("ui-state-active");
q=p.p.prmNames;v=a.extend({},c.delData,o);h=q.oper;v[h]=q.deloper;d=q.id;v[d]=E;var P=a.extend({url:c.url?c.url:a(p).jqGrid("getGridParam","editurl"),type:b.mtype,data:a.isFunction(b.serializeDelData)?b.serializeDelData(v):v,complete:function(l,u){if(u!="success"){k[0]=false;k[1]=a.isFunction(c.errorTextFormat)?c.errorTextFormat(l):u+" Status: '"+l.statusText+"'. Error code: "+l.status}else if(typeof c.afterSubmit==="function")k=c.afterSubmit(l,v);if(k[0]===false){a("#DelError>td","#"+r).html(k[1]);
a("#DelError","#"+r).show()}else{if(c.reloadAfterSubmit&&p.p.datatype!="local")a(p).trigger("reloadGrid");else{u=[];u=E.split(",");if(p.p.treeGrid===true)try{a(p).jqGrid("delTreeNode",u[0])}catch(t){}else for(var I=0;I<u.length;I++)a(p).jqGrid("delRowData",u[I]);p.p.selrow=null;p.p.selarrrow=[]}a.isFunction(c.afterComplete)&&setTimeout(function(){c.afterComplete(l,E)},500)}c.processing=false;a("#dData","#"+r+"_2").removeClass("ui-state-active");k[0]&&a.jgrid.hideModal("#"+j.themodal,{gb:"#gbox_"+
w,jqm:b.jqModal,onClose:c.onClose})},error:function(l,u,t){a("#DelError>td","#"+r).html(u+" : "+t);a("#DelError","#"+r).show();c.processing=false;a("#dData","#"+r+"_2").removeClass("ui-state-active")}},a.jgrid.ajaxOptions,b.ajaxDelOptions);if(!P.url&&!c.useDataProxy)if(a.isFunction(p.p.dataProxy))c.useDataProxy=true;else{k[0]=false;k[1]+=" "+a.jgrid.errors.nourl}if(k[0])c.useDataProxy?p.p.dataProxy.call(p,P,"del_"+p.p.id):a.ajax(P)}if(k[0]===false){a("#DelError>td","#"+r).html(k[1]);a("#DelError",
"#"+r).show()}return false});a("#eData","#"+r+"_2").click(function(){a.jgrid.hideModal("#"+j.themodal,{gb:"#gbox_"+w,jqm:b.jqModal,onClose:c.onClose});return false});F&&b.beforeShowForm(a("#"+r));a.jgrid.viewModal("#"+j.themodal,{gbox:"#gbox_"+w,jqm:b.jqModal,overlay:b.overlay,modal:b.modal})}y&&b.afterShowForm(a("#"+r));b.closeOnEscape===true&&setTimeout(function(){a(".ui-jqdialog-titlebar-close","#"+j.modalhead).focus()},0)}})},navGrid:function(e,b,p,F,y,z,w){b=a.extend({edit:true,editicon:"ui-icon-pencil",
add:true,addicon:"ui-icon-plus",del:true,delicon:"ui-icon-trash",search:true,searchicon:"ui-icon-search",refresh:true,refreshicon:"ui-icon-refresh",refreshstate:"firstpage",view:false,viewicon:"ui-icon-document",position:"left",closeOnEscape:true,beforeRefresh:null,afterRefresh:null,cloneToTop:false},a.jgrid.nav,b||{});return this.each(function(){var o={themodal:"alertmod",modalhead:"alerthd",modalcontent:"alertcnt"},m=this,r,v,d;if(!(!m.grid||typeof e!="string")){if(a("#"+o.themodal).html()===null){if(typeof window.innerWidth!=
"undefined"){r=window.innerWidth;v=window.innerHeight}else if(typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!==0){r=document.documentElement.clientWidth;v=document.documentElement.clientHeight}else{r=1024;v=768}a.jgrid.createModal(o,"<div>"+b.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+m.p.id,jqModal:true,drag:true,resize:true,caption:b.alertcap,top:v/
2-25,left:r/2-100,width:200,height:"auto",closeOnEscape:b.closeOnEscape},"","",true)}r=1;if(b.cloneToTop&&m.p.toppager)r=2;for(v=0;v<r;v++){var q=a("<table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr></tr></tbody></table>"),h,j;if(v===0){h=e;j=m.p.id;if(h==m.p.toppager){j+="_top";r=1}}else{h=m.p.toppager;j=m.p.id+"_top"}m.p.direction=="rtl"&&a(q).attr("dir","rtl").css("float","right");if(b.add){F=F||{};d=a("<td class='ui-pg-button ui-corner-all'></td>");
a(d).append("<div class='ui-pg-div'><span class='ui-icon "+b.addicon+"'></span>"+b.addtext+"</div>");a("tr",q).append(d);a(d,q).attr({title:b.addtitle||"",id:F.id||"add_"+j}).click(function(){a(this).hasClass("ui-state-disabled")||(typeof b.addfunc=="function"?b.addfunc():a(m).jqGrid("editGridRow","new",F));return false}).hover(function(){a(this).hasClass("ui-state-disabled")||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});d=null}if(b.edit){d=a("<td class='ui-pg-button ui-corner-all'></td>");
p=p||{};a(d).append("<div class='ui-pg-div'><span class='ui-icon "+b.editicon+"'></span>"+b.edittext+"</div>");a("tr",q).append(d);a(d,q).attr({title:b.edittitle||"",id:p.id||"edit_"+j}).click(function(){if(!a(this).hasClass("ui-state-disabled")){var k=m.p.selrow;if(k)typeof b.editfunc=="function"?b.editfunc(k):a(m).jqGrid("editGridRow",k,p);else{a.jgrid.viewModal("#"+o.themodal,{gbox:"#gbox_"+m.p.id,jqm:true});a("#jqg_alrt").focus()}}return false}).hover(function(){a(this).hasClass("ui-state-disabled")||
a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});d=null}if(b.view){d=a("<td class='ui-pg-button ui-corner-all'></td>");w=w||{};a(d).append("<div class='ui-pg-div'><span class='ui-icon "+b.viewicon+"'></span>"+b.viewtext+"</div>");a("tr",q).append(d);a(d,q).attr({title:b.viewtitle||"",id:w.id||"view_"+j}).click(function(){if(!a(this).hasClass("ui-state-disabled")){var k=m.p.selrow;if(k)a(m).jqGrid("viewGridRow",k,w);else{a.jgrid.viewModal("#"+o.themodal,{gbox:"#gbox_"+
m.p.id,jqm:true});a("#jqg_alrt").focus()}}return false}).hover(function(){a(this).hasClass("ui-state-disabled")||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});d=null}if(b.del){d=a("<td class='ui-pg-button ui-corner-all'></td>");y=y||{};a(d).append("<div class='ui-pg-div'><span class='ui-icon "+b.delicon+"'></span>"+b.deltext+"</div>");a("tr",q).append(d);a(d,q).attr({title:b.deltitle||"",id:y.id||"del_"+j}).click(function(){if(!a(this).hasClass("ui-state-disabled")){var k;
if(m.p.multiselect){k=m.p.selarrrow;if(k.length===0)k=null}else k=m.p.selrow;if(k)"function"==typeof b.delfunc?b.delfunc(k):a(m).jqGrid("delGridRow",k,y);else{a.jgrid.viewModal("#"+o.themodal,{gbox:"#gbox_"+m.p.id,jqm:true});a("#jqg_alrt").focus()}}return false}).hover(function(){a(this).hasClass("ui-state-disabled")||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});d=null}if(b.add||b.edit||b.del||b.view)a("tr",q).append("<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>");
if(b.search){d=a("<td class='ui-pg-button ui-corner-all'></td>");z=z||{};a(d).append("<div class='ui-pg-div'><span class='ui-icon "+b.searchicon+"'></span>"+b.searchtext+"</div>");a("tr",q).append(d);a(d,q).attr({title:b.searchtitle||"",id:z.id||"search_"+j}).click(function(){a(this).hasClass("ui-state-disabled")||a(m).jqGrid("searchGrid",z);return false}).hover(function(){a(this).hasClass("ui-state-disabled")||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});
d=null}if(b.refresh){d=a("<td class='ui-pg-button ui-corner-all'></td>");a(d).append("<div class='ui-pg-div'><span class='ui-icon "+b.refreshicon+"'></span>"+b.refreshtext+"</div>");a("tr",q).append(d);a(d,q).attr({title:b.refreshtitle||"",id:"refresh_"+j}).click(function(){if(!a(this).hasClass("ui-state-disabled")){a.isFunction(b.beforeRefresh)&&b.beforeRefresh();m.p.search=false;try{a("#fbox_"+m.p.id).searchFilter().reset({reload:false});a.isFunction(m.clearToolbar)&&m.clearToolbar(false)}catch(k){}switch(b.refreshstate){case "firstpage":a(m).trigger("reloadGrid",
[{page:1}]);break;case "current":a(m).trigger("reloadGrid",[{current:true}]);break}a.isFunction(b.afterRefresh)&&b.afterRefresh()}return false}).hover(function(){a(this).hasClass("ui-state-disabled")||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});d=null}d=a(".ui-jqgrid").css("font-size")||"11px";a("body").append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+d+";visibility:hidden;' ></div>");d=a(q).clone().appendTo("#testpg2").width();
a("#testpg2").remove();a(h+"_"+b.position,h).append(q);if(m.p._nvtd){if(d>m.p._nvtd[0]){a(h+"_"+b.position,h).width(d);m.p._nvtd[0]=d}m.p._nvtd[1]=d}q=d=d=null}}})},navButtonAdd:function(e,b){b=a.extend({caption:"newButton",title:"",buttonicon:"ui-icon-newwin",onClickButton:null,position:"last",cursor:"pointer"},b||{});return this.each(function(){if(this.grid){if(e.indexOf("#")!==0)e="#"+e;var p=a(".navtable",e)[0],F=this;if(p){var y=a("<td></td>");b.buttonicon.toString().toUpperCase()=="NONE"?a(y).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'>"+
b.caption+"</div>"):a(y).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'><span class='ui-icon "+b.buttonicon+"'></span>"+b.caption+"</div>");b.id&&a(y).attr("id",b.id);if(b.position=="first")p.rows[0].cells.length===0?a("tr",p).append(y):a("tr td:eq(0)",p).before(y);else a("tr",p).append(y);a(y,p).attr("title",b.title||"").click(function(z){a(this).hasClass("ui-state-disabled")||a.isFunction(b.onClickButton)&&b.onClickButton.call(F,z);return false}).hover(function(){a(this).hasClass("ui-state-disabled")||
a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")})}}})},navSeparatorAdd:function(e,b){b=a.extend({sepclass:"ui-separator",sepcontent:""},b||{});return this.each(function(){if(this.grid){if(e.indexOf("#")!==0)e="#"+e;var p=a(".navtable",e)[0];if(p){var F="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='"+b.sepclass+"'></span>"+b.sepcontent+"</td>";a("tr",p).append(F)}}})},GridToForm:function(e,b){return this.each(function(){var p=this;
if(p.grid){var F=a(p).jqGrid("getRowData",e);if(F)for(var y in F)a("[name="+y+"]",b).is("input:radio")||a("[name="+y+"]",b).is("input:checkbox")?a("[name="+y+"]",b).each(function(){a(this).val()==F[y]?a(this).attr("checked","checked"):a(this).attr("checked","")}):a("[name="+y+"]",b).val(F[y])}})},FormToGrid:function(e,b,p,F){return this.each(function(){var y=this;if(y.grid){p||(p="set");F||(F="first");var z=a(b).serializeArray(),w={};a.each(z,function(o,m){w[m.name]=m.value});if(p=="add")a(y).jqGrid("addRowData",
e,w,F);else p=="set"&&a(y).jqGrid("setRowData",e,w)}})}})})(jQuery);
