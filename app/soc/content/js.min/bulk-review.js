jQuery(document).ready(function(){jQuery("#applications_progress_bar").progressBar({showText:false})});
function bulkReview(b){var d=b.link,c=b.nr_applications,a=0,j=b.applications.length;setTimeout(function(){var g=false,h=b.applications[a],i=a+1,e=/\((\w*)\)/,k=d.match(e)[1];e=d.replace(e,h[k]);jQuery.ajax({async:false,cache:false,url:e,timeout:1E4,success:function(f){if(f){f=Math.floor(100*i/c);jQuery("#description_progressbar").html([" Processed application ",h.name," (",i,"/",c,")"].join(""));jQuery("#applications_progress_bar").progressBar(f)}},error:function(f,l,m){g=true;jQuery("[id^=button_bulk_]").fadeIn("slow",
function(){jQuery("#description_done").html("<strong class='error'>  Error encountered, try again</strong>")})}});if(!g){a++;if(a<j)setTimeout(arguments.callee,0);else{jQuery("#applications_progress_bar").fadeOut("slow",function(){jQuery("#applications_progress_bar").progressBar(0);jQuery("[id^=button_bulk_]").fadeIn("slow")});jQuery("#description_progressbar").html("");jQuery("#description_done").html("<strong>Done!</strong>")}}},0)}
function bulkReviewInit(b,d){jQuery.getJSON(b+"?_="+(new Date).getTime(),function(c){if(c.nr_applications!==0)jQuery("[id^=button_bulk_]").fadeOut("slow",function(){jQuery("#applications_progress_bar").progressBar(0);jQuery("#description_done").html("");jQuery("#applications_progress_bar").fadeIn("slow",bulkReview(c))});else{var a="No organizations to ";a+=jQuery(d).attr("id").indexOf("reject")!==-1?"reject":"accept";jQuery("#description_done").html("<strong>"+a+"</strong>")}})};
