jQuery(function(){var h={navbar_structure:{children:[]}};jQuery("#menu li.expandable, #menu li.expandable-collapsed").find("a").each(function(){jQuery(this).text().indexOf("(new)")>-1&&jQuery(this).css("color","red")});jQuery("#side #menu li.expandable > a, #side #menu li.expandable-collapsed > a").dblclick(function(){window.location=jQuery(this).attr("href")});var i=function(a,d){for(var c=0;c<d.length;c++){var b=jQuery(d[c]),e=b.parent("li:last").hasClass("expandable-collapsed")?true:false;e={span_text:b.text(),
collapsed:e,children:[]};b=b.parent().find("span ~ ul > li[class^=expandable] > span");b.length!==0&&i(e,b);a.children.push(e)}},j=function(a,d){for(var c=0;c<d.length;c++){var b=[];a.span_text!==undefined&&b.push({span_text:a.span_text,collapsed:a.collapsed});d[c].span_text!==undefined&&b.push({span_text:d[c].span_text,collapsed:d[c].collapsed});j(d[c],d[c].children);if(b.length!==0)for(var e="#side #menu > ul > li > ul > li[class^=expandable]",f=b.length-1;f>=0;f--){for(var g=0;g<f;g++)e+=" > ul > li[class^=expandable]";
g=jQuery(e+" > span").filter(function(){return jQuery(this).html()===b[f].span_text})[0];b[f].collapsed?jQuery(g).parent("li:last").addClass("expandable-collapsed").removeClass("expandable"):jQuery(g).parent("li:last").addClass("expandable").removeClass("expandable-collapsed")}}},l=function(){jQuery("#side #menu li.expandable > span").contents().before('<img src="/soc/content/images/minus.gif" />');jQuery("#side #menu li.expandable-collapsed > span").contents().before('<img src="/soc/content/images/plus.gif" />');
jQuery("#side #menu li.expandable-collapsed > ul").hide()},k=function(){var a=jQuery(this);if(a.parent("li:last").hasClass("expandable")){a.find("img").attr("src","/soc/content/images/plus.gif").end().parent().children("ul").toggle();jQuery(this).parent("li:last").addClass("expandable-collapsed").removeClass("expandable")}else{a.find("img").attr("src","/soc/content/images/minus.gif").end().parent().children("ul").toggle();jQuery(this).parent("li:last").addClass("expandable").removeClass("expandable-collapsed")}a=
jQuery("#side #menu > ul > li > ul > li[class^=expandable] > span");i(h.navbar_structure,a);jQuery.cookie("user_preferences",JSON.stringify(h),{path:"/",expires:14})};jQuery("#side #menu li[class^=expandable] > span").toggle(k,k);(function(){var a=jQuery.cookie("user_preferences");try{a=JSON.parse(a);if(a===null)throw"null_cookie";j(a.navbar_structure,a.navbar_structure.children)}catch(d){jQuery.cookie("user_preferences",{path:"/"});a=jQuery("#side #menu > ul > li > ul > li[class^=expandable] > span");
i(h.navbar_structure,a);jQuery.cookie("user_preferences",JSON.stringify(h),{path:"/",expires:14})}l()})()});
