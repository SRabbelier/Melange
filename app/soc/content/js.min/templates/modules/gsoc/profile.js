(function(){function l(){jQuery.each(d,function(c,a){a.old_value=jQuery(a.id).val()})}function r(){var c=false;jQuery.each(d,function(a,b){if(jQuery(b.id).val()!==b.old_value){c=true;return false}});return c}function m(){jQuery(j).val(g);jQuery(k).val(h)}function s(){g=jQuery(j).val();h=jQuery(k).val()}function t(){if(r()){var c="";jQuery.each(d,function(a,b){c+=jQuery(b.id).val()+","});n.getLatLng(c,function(a){if(a){l();var b=o;if(jQuery(d.street.id).val()!=="")b=p;else if(jQuery(d.city.id).val()!==
"")b=u;else if(jQuery(d.state.id).val()!=="")b=v;else if(jQuery(d.country.id).val()!=="")b=w;e.setCenter(a,b);f.setPoint(a);e.clearOverlays();e.addOverlay(f);g=a.lat();h=a.lng();m()}})}}function x(){if(google.maps.BrowserIsCompatible()){l();var c,a=o,b=true;e=new google.maps.Map2(document.getElementById(q));e.addControl(new google.maps.SmallMapControl);e.addControl(new google.maps.MapTypeControl);n=new google.maps.ClientGeocoder;if(jQuery(j).val()!==""&&jQuery(k).val()!==""){s();a=p;b=true}c=new google.maps.LatLng(g,
h);e.setCenter(c,a);f=new google.maps.Marker(c,{draggable:true});b&&e.addOverlay(f);jQuery.each(d,function(z,y){jQuery(y.id).blur(t)});google.maps.Event.addListener(f,"dragend",function(){g=f.getPoint().lat();h=f.getPoint().lng();m()})}}var i=window.melange;this.prototype=new i.templates._baseTemplate;this.prototype.constructor=i.templates._baseTemplate;i.templates._baseTemplate.apply(this,arguments);var e,f,n,g=0,h=0,o=1,w=4,v=6,u=10,p=13,q="profile_map",j="#latitude",k="#longitude",d={street:{id:"#res_street",
old_value:""},city:{id:"#res_city",old_value:""},state:{id:"#res_state",old_value:""},country:{id:"#res_country",old_value:""},postalcode:{id:"#res_postalcode",old_value:""}};jQuery(function(){jQuery("#form_row_publish_location").append("<div id='"+q+"'></div>");i.loadGoogleApi("maps","2",{},x)})})();
