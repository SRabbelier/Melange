{% extends "soc/base.html" %}
{% comment %}
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
{% endcomment %}
{% load comments_helpers %}
{% load forms_helpers %}

{% block header_title %}
{{ page_name }} "{{ entity.title }}" from {{ student_name }} (Score: {{ entity.score }})
{% endblock %}

{% block body %}
<p>
 <table>
  {% readonly_field_as_table_row entity.fields.title.label entity.title %}
  {% readonly_field_as_table_row "Student" student_name %}
  {% readonly_field_as_table_row "Mentor" mentor_name %}
  {% readonly_field_as_table_row "Possible Mentors" possible_mentors %}
  {% readonly_field_as_twoline_table_row entity.fields.abstract.label entity.abstract %}
  {% readonly_safe_field_as_twoline_table_row entity.fields.content.label entity.content %}
  {% readonly_field_as_table_row "Created on" entity.created_on %}
  {% readonly_field_as_table_row "Last Modified on" entity.last_modified_on %}
 </table>
</p>
<hr/>
<b>Public Reviews</b>
{% for review in public_reviews %}
  {% as_student_proposal_review review student %}
{% endfor %}
<hr/>
<b>Private Reviews</b>
{% for review in private_reviews %}
  {% as_student_proposal_review review student %}
{% endfor %}
<hr/>

<form method="POST">
  <table>
    {% block form_table %}
      {% as_table form %}
    {% endblock %}
  </table>
 <table>
  <tr>
   <td colspan="4">&nbsp;</td>
  </tr>
  <tr>
   <td> 
    <input style="font-weight: bold" type="submit" value="Submit"/></span>
   </td>
   {% if add_me_as_mentor %}
   <td>
   <input style="font-weight: bold" type="button" value="I am willing to mentor this student"
     onclick="location.href='?mentor=1'"/>
   </td>
   {% else %} 
     {% if remove_me_as_mentor %}
     <td>
       <input style="font-weight: bold" type="button" value="I am no longer willing to mentor this student"
       onclick="location.href='?mentor=0'"/>
     </td>
     {% endif %}
   {% endif %}
   {% if is_org_admin %}
     <td>
       <input style="font-weight: bold" type="button" value="Mark as Ineligible"
       onclick="location.href='?ineligible=1'"/>
     </td>
   {% endif %}
   {% if is_subscribed_public %}
   <td>
     <input style="font-weight: bold" type="button" value="Unsubscribe from public updates"
       onclick="location.href='?public_subscription=off'"/>
   </td>
   {% else %}
   <td>
     <input style="font-weight: bold" type="button" value="Subscribe to public updates"
       onclick="location.href='?public_subscription=on'"/>
   </td>
   {% endif %}
   {% if is_subscribed_private %}
   <td>
     <input style="font-weight: bold" type="button" value="Unsubscribe from private updates"
       onclick="location.href='?private_subscription=off'"/>
   </td>
   {% else %}
   <td>
     <input style="font-weight: bold" type="button" value="Subscribe to private updates"
       onclick="location.href='?private_subscription=on'"/>
   </td>
   {% endif %}
 </table>
</form>

{% endblock %}
